(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d207d74"],{a1f4:function(s,t,a){"use strict";a.r(t);var e=function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("div",{staticClass:"row"},[s.isReady&&s.userData.avatar?a("div",{staticClass:"col-12 mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 flex-x-between mb-3"},[a("div",{staticClass:"flex-align-center"},[a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"no-width flat",attrs:{type:"primary",circle:""},on:{click:function(t){return s.$router.go(-1)}}},[a("i",{staticClass:"bx bx-left-arrow-alt"})]),a("h5",{staticClass:"my-0 ml-2"},[s._v("My account")])],1),a("div",{staticClass:"flex-align-center flex-end"},[s.isReady&&s.startEditing?a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"flat",attrs:{type:"primary"},on:{click:s.cancelEdit}},[a("i",{staticClass:"bx bx-x mr-1"}),s._v(" Discard ")]):s._e(),s.isReady&&s.startEditing?a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],attrs:{disabled:!s.startEditing,loading:s.saving,type:"primary"},on:{click:s.Post}},[a("i",{staticClass:"bx bx-save mr-1"}),s._v(" Save ")]):s._e()],1)]),a("div",{staticClass:"col-lg-8"},[a("div",{staticClass:"box"},[a("div",{staticClass:"flex-x-between"},[a("p",{staticClass:"mt-0 mb-2 text-bold"},[s._v("Details")]),a("p",{staticClass:"hover-underline primary",on:{click:function(t){s.active=!0,s.type="Password"}}},[a("i",{staticClass:"bx bx-lock-alt mr-1"}),s._v(" Change password ")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[s._v("Avatar")]),a("file",{attrs:{initialData:s.userData.avatar?[{image:s.userData.avatar}]:[]},on:{completed:s.setImage}})],1),a("div",{staticClass:"col-6"},[a("label",{staticClass:"custom-label",attrs:{for:"name"}},[s._v("First Name")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:"name "},model:{value:s.userData.first_name,callback:function(t){s.$set(s.userData,"first_name",t)},expression:"userData.first_name"}})],1),a("div",{staticClass:"col-6"},[a("label",{staticClass:"custom-label",attrs:{for:"name"}},[s._v("Last Name")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:"name "},model:{value:s.userData.last_name,callback:function(t){s.$set(s.userData,"last_name",t)},expression:"userData.last_name"}})],1),a("div",{staticClass:"col-12"},[a("label",{staticClass:"custom-label",attrs:{for:"email"}},[s._v("Email Address")]),a("el-input",{staticClass:"w-100 mb-3 disabled",attrs:{name:"email "},model:{value:s.userData.email,callback:function(t){s.$set(s.userData,"email",t)},expression:"userData.email"}})],1)])])])])]):s._e(),a("el-dialog",{staticClass:"default-dialog",attrs:{"show-close":!1,visible:s.active},on:{"update:visible":function(t){s.active=t}},scopedSlots:s._u([{key:"title",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-between"},[a("h5",{staticClass:"my-0"},[s._v("Changing "+s._s(s.type))]),a("div",{staticClass:"d-flex align-items-center"})])]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-end"},[a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"my-0 flat mr-0",attrs:{type:"primary"},on:{click:function(t){s.active=!1}}},[s._v(" Cancel ")]),a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"my-0 mr-0",attrs:{type:"primary",loading:s.confirming},on:{click:s.confirm}},[s._v(" Done ")])],1)]},proxy:!0}])},[a("div",{staticClass:"con-content"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-2"},["Email"===s.type?a("div",{staticClass:"w-100"},[a("label",{staticClass:"custom-label",attrs:{for:"email"}},[s._v("Email Address")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:"email "},model:{value:s.userData.email,callback:function(t){s.$set(s.userData,"email",t)},expression:"userData.email"}})],1):s._e(),"Password"===s.type?a("div",{staticClass:"w-100"},[a("label",{staticClass:"custom-label",attrs:{for:"Old Password"}},[s._v("Old Password")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:"Old Password ",label:"Old Password",type:"password"},model:{value:s.old_password,callback:function(t){s.old_password=t},expression:"old_password"}}),a("label",{staticClass:"custom-label",attrs:{for:"New Password"}},[s._v("New Password")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:"New Password ",type:"password"},model:{value:s.password,callback:function(t){s.password=t},expression:"password"}}),a("label",{staticClass:"custom-label",attrs:{for:"New Password Confirmation"}},[s._v("New Password Confirmation")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:"New Password Confirmation ",label:"New Password Confirmation",type:"password"},model:{value:s.password_confirm,callback:function(t){s.password_confirm=t},expression:"password_confirm"}})],1):s._e()])])])])],1)},i=[],r=(a("ac1f"),a("5319"),a("5530")),o=a("2f62"),l=a("9c83"),n=a("d50a"),c={data:function(){return{url:l["c"],active:!1,type:"Email",userData:{avatar:""},saving:!1,startEditing:!1,confirming:!1,old_password:"",password:"",password_confirm:""}},components:{file:n["d"]},watch:{user:function(s){s&&(this.setUser(),this.$store.commit("setIsReady",!0))},userData:{handler:function(){this.startEditing=!0},deep:!0}},mounted:function(){this.user&&(this.setUser(),this.$store.commit("setIsReady",!0))},computed:Object(r["a"])(Object(r["a"])({},Object(o["c"])(["user","store","isReady"])),Object(o["b"])(["checkIsReady"])),beforeMount:function(){var s=this;window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("beforeunload",s.preventNav)}))},beforeRouteLeave:function(s,t,a){this.startEditing?this.$smalltalk.confirm("Question","Do you really want to leave? you have unsaved changes!").then((function(){a()})).catch((function(){a(!1)})):a()},methods:{preventNav:function(s){this.startEditing&&(s.preventDefault(),s.returnValue="")},setUser:function(){var s=this;this.userBeforeEdit=JSON.stringify(this.user),this.userData=this.user,setTimeout((function(){s.startEditing=!1}),10)},setImage:function(s){s.length>0?this.userData.avatar=s[0].image:this.userData.avatar="/media/default.png"},cancelEdit:function(){var s=this;this.userData=JSON.parse(this.userBeforeEdit),setTimeout((function(){s.startEditing=!1}),10)},Post:function(){var s=this;this.saving=!0,this.userData.username=this.userData.first_name.replace(/\s+/g,"_").toLowerCase()+"_"+this.userData.last_name.replace(/\s+/g,"_").toLowerCase(),this.$axios.put("auth/",{data:this.userData}).then((function(t){s.$store.commit("setUser",t.data),s.userBeforeEdit=JSON.stringify(t.data),s.saving=!1,s.$noti.display({color:"success",title:"Success",message:"Cool! You profile has been successfully updated."}),setTimeout((function(){s.startEditing=!1}),100)})).catch((function(t){s.saving=!1,s.$noti.display({message:t,status:"error",color:"error"})}))},confirm:function(){var s=this;this.confirming=!0,"Email"===this.type&&this.$axios.post("change-email/",{email:this.userData.email}).then((function(){s.confirming=!1,s.active=!1,s.$noti.display({color:"success",title:"Success",message:"The email comfimation message is sent to your email, please check your email!"})})).catch((function(t){s.confirming=!1,s.active=!1,s.$noti.display({message:t,status:"error",color:"error"})})),"Password"===this.type&&this.$axios.put("change-password/",{old_password:this.old_password,password:this.password,password_confirm:this.password_confirm}).then((function(){s.confirming=!1,s.active=!1,s.$noti.display({color:"success",title:"Success",message:"Changing password success!"})})).catch((function(t){s.confirming=!1,s.active=!1,s.$noti.display({message:t,status:"error",color:"error"})}))}}},d=c,u=a("2877"),m=Object(u["a"])(d,e,i,!1,null,null,null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d207d74.93d025c6.js.map