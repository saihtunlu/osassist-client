(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-34eea88a"],{"0491":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"billing row"},[t.isReady?a("div",{staticClass:"col-12 mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 flex-x-between mb-3"},[a("div",{staticClass:"flex-align-center"},[a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"no-width mr-2 flat",attrs:{circle:"",type:"primary"},on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"bx bx-left-arrow-alt"})]),a("h5",{staticClass:"my-0 mx-2"},[t._v("Billing")]),a("el-tag",{staticClass:"rounded mr-2",attrs:{type:"primary"}},[t._v(t._s(t.billing.date))]),a("el-tag",{staticClass:"rounded mr-2",attrs:{type:"primary"}},[t._v(t._s(t.billing.status))]),"Paid"==t.billing.payment_status?a("el-tag",{staticClass:"rounded mr-2",attrs:{type:"success"}},[t._v(t._s(t.billing.payment_status))]):t._e(),"Unpaid"==t.billing.payment_status?a("el-tag",{staticClass:"rounded mr-2",attrs:{type:"danger"}},[t._v(t._s(t.billing.payment_status))]):t._e(),"Partially Paid"==t.billing.payment_status?a("el-tag",{staticClass:"rounded mr-2",attrs:{type:"warning"}},[t._v(t._s(t.billing.payment_status))]):t._e()],1),a("div",{staticClass:"flex-align-center"})]),a("div",{staticClass:"col-lg-8"},[a("div",{staticClass:"box"},[a("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Details")]),a("div",{staticClass:"flex-x-between w-100"},[a("p",[t._v("Plan :")]),a("p",[t._v(" "+t._s(t.billing.selected_plan.name)+" ")])]),a("div",{staticClass:"b-divider my-3"}),a("div",{staticClass:"flex-x-between w-100"},[a("p",[t._v("Number of months :")]),a("p",[t._v(" "+t._s(t.billing.number_of_months)+" ")])]),a("div",{staticClass:"b-divider my-3"}),a("div",{staticClass:"flex-x-between w-100"},[a("p",[t._v("Price per month :")]),a("p",[t._v(t._s(t.billing.price)+"MMK")])]),a("div",{staticClass:"b-divider my-3"}),a("div",{staticClass:"flex-x-between w-100"},[a("p",[t._v("Total :")]),a("p",[t._v(t._s(t.billing.total)+"MMK")])]),a("div",{staticClass:"b-divider my-3"}),a("div",{staticClass:"flex-x-between w-100"},[a("p",[t._v("Payment status :")]),a("p",[t._v(t._s(t.billing.payment_status))])])]),a("div",{staticClass:"box mt-3"},[a("div",{staticClass:"flex-x-between"},[a("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Payment history")]),"Paid"!==t.billing.payment_status?a("p",{staticClass:"mt-0 mb-2 primary hover-underline pointer",on:{click:function(e){t.openPayment=!0}}},[t._v(" Add payment ")]):t._e()]),t._l(t.billing.payments,(function(e,i){return a("div",{key:i,staticClass:"w-100"},[a("p",{staticClass:"my-2"},[t._v(" Paid "+t._s(e.amount)+"MMK on "+t._s(e.date)+" "),e.payment_method?a("span",[t._v(" via "+t._s(e.payment_method.name)+" ("+t._s(e.payment_method.payment_number)+")")]):t._e(),t._v(". ")]),a("div",{staticClass:"media-box"},[a("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Screenshots")]),a("div",{staticClass:"image-list"},t._l(e.images,(function(e,s){return a("div",{key:e.image,staticClass:"pointer light-box-img"},[a("img",{attrs:{src:t.mediaUrl+e.image,alt:""},on:{click:function(e){t.index=s,t.activePaymentIndex=i}}})])})),0)]),i!==t.billing.payments.length-1?a("div",{staticClass:"b-divider"}):t._e()])}))],2)]),a("div",{staticClass:"col-lg-4 pl-lg-0 mt-3 mt-lg-0"},[a("div",{staticClass:"mb-3 box"},[a("label",{staticClass:"custom-label mt-2 mb-0"},[t._v("Note")]),a("p",[t._v(t._s(t.billing.note))])])])])]):t._e(),t.billing.payments[0]&&t.billing.payments[0].images.length>0?a("CoolLightBox",{attrs:{items:t.imagesListGenerator(t.billing.payments[t.activePaymentIndex].images),useZoomBar:!0,index:t.index},on:{close:function(e){t.index=null}}}):t._e(),a("el-dialog",{staticClass:"default-dialog",attrs:{"show-close":!1,width:"700px !important",visible:t.openPayment},on:{"update:visible":function(e){t.openPayment=e}},scopedSlots:t._u([{key:"title",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-between"},[a("h5",{staticClass:"my-0"},[t._v("Make a payment")]),a("div",{staticClass:"d-flex align-items-center"})])]},proxy:!0},{key:"footer",fn:function(){return[a("div",{staticClass:"d-flex align-items-center justify-content-end"},[a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"my-0 flat mr-0",attrs:{type:"dark"},on:{click:function(e){t.openPayment=!1}}},[t._v(" Cancel ")]),a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"my-0 mr-0",attrs:{type:"primary",loading:t.adding,disabled:t.disabledAddPayment},on:{click:t.addPayment}},[t._v(" Done ")])],1)]},proxy:!0}])},[a("div",{staticClass:"con-content"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("div",{staticClass:"row px-2"},t._l(t.paymentMethods,(function(e){return a("div",{key:e.id,staticClass:"col-4 px-2"},[a("div",{staticClass:"payment-box pointer",class:e.name==t.payment.payment_method.name&&"active",on:{click:function(a){t.payment.payment_method=e}}},[a("p",{staticClass:"mb-3 font-weight-bold"},[t._v(t._s(e.name))]),a("p",[t._v(t._s(e.payment_number))])])])})),0)]),a("div",{staticClass:"col-12 mb-3"},[a("label",{staticClass:"custom-label mt-1 md-text",attrs:{for:""}},[t._v("Screenshots")]),a("file",{attrs:{multiple:!0},on:{completed:t.setImages}})],1),a("div",{staticClass:"col-6 pr-1"},[a("div",{staticClass:"w-100"},[a("label",{staticClass:"custom-label md-text",attrs:{for:""}},[t._v("Date")]),a("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd/MM/yyyy","value-format":"dd/MM/yyyy",placeholder:"Pick a date"},model:{value:t.payment.date,callback:function(e){t.$set(t.payment,"date",e)},expression:"payment.date"}})],1)]),a("div",{staticClass:"col-6 pl-1"},[a("label",{staticClass:"custom-label",attrs:{for:"Amount"}},[t._v("Amount")]),a("el-input",{staticClass:"w-100",attrs:{name:"Amount",type:"number"},model:{value:t.payment.amount,callback:function(e){t.$set(t.payment,"amount",e)},expression:"payment.amount"}})],1)])])])],1)},s=[],n=(a("4160"),a("13d5"),a("b0c0"),a("159b"),a("5530")),l=a("2f62"),o=a("9c83"),c=a("d50a"),r={data:function(){return{adding:!1,url:o["c"],index:null,activePaymentIndex:0,openPayment:!1,mediaUrl:o["b"],paymentMethods:[],saving:!1,payment:{images:[],payment_method:{name:""},date:null,amount:0},startEditing:!1,billing:{store:null,selected_plan:null,payments:[{images:[],date:null,amount:0}],payment_method:null,subtotal:null,total:null,status:"Pending",payment_status:"Unpaid",number_of_months:null},selectedPackage:null,disabledAddPayment:!0}},watch:{selectedPackage:{handler:function(t){this.billing.price=t.price,this.billing.number_of_months=t.monthQuantity,this.billing.total=t.price*t.monthQuantity},deep:!0},payment:{handler:function(t){""==t.payment_method.name||0==t.amount?this.disabledAddPayment=!0:this.disabledAddPayment=!1},deep:!0}},created:function(){this.$route.query.bid||this.$router.push({name:"Billings"}),this.payment.date=this.$moment().format("DD/MM/YYYY"),this.$store.commit("setIsReady",!1),this.getPaymentMethods(),this.getBilling(this.$route.query.bid)},mounted:function(){},computed:Object(n["a"])(Object(n["a"])({},Object(l["c"])(["isReady"])),Object(l["b"])(["checkIsReady"])),components:{file:c["d"]},methods:{getPaymentMethods:function(){var t=this;this.$axios.get("payment-methods/").then((function(e){t.paymentMethods=e.data})).catch((function(e){t.$noti.display({message:e,status:"error",color:"error"})}))},addPayment:function(){var t=this;this.adding=!0,this.billing.payments.push(this.payment),this.checkPayment(),this.$axios.post("billing-payment/",{bid:this.billing.id,payment_status:this.billing.payment_status,payment:this.payment}).then((function(){t.adding=!1,t.openPayment=!1})).catch((function(e){t.$noti.display({message:e,status:"error",color:"error"}),t.adding=!1,t.openPayment=!1}))},checkPayment:function(){var t=this.billing.payments.reduce((function(t,e){return t+parseInt(e.amount)}),0);t==this.billing.total||t>this.billing.total?this.billing.payment_status="Paid":t<this.billing.total?this.billing.payment_status="Partially Paid":0==t&&(this.billing.payment_status="Unpaid")},setImages:function(t){this.payment.images=t},getBilling:function(t){var e=this;this.$axios.get("billing/?bid="+t).then((function(t){e.billing=t.data,e.$store.commit("setIsReady",!0)})).catch((function(t){e.$noti.display({message:t,status:"error",color:"error"})}))},imagesListGenerator:function(t){var e=this,a=[];return t.forEach((function(t){a.push(e.mediaUrl+t.image)})),a}}},m=r,d=(a("fa07"),a("2877")),p=Object(d["a"])(m,i,s,!1,null,null,null);e["default"]=p.exports},"13d5":function(t,e,a){"use strict";var i=a("23e7"),s=a("d58f").left,n=a("a640"),l=a("ae40"),o=n("reduce"),c=l("reduce",{1:0});i({target:"Array",proto:!0,forced:!o||!c},{reduce:function(t){return s(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}})},"1d35":function(t,e,a){},d58f:function(t,e,a){var i=a("1c0b"),s=a("7b0b"),n=a("44ad"),l=a("50c4"),o=function(t){return function(e,a,o,c){i(a);var r=s(e),m=n(r),d=l(r.length),p=t?d-1:0,u=t?-1:1;if(o<2)while(1){if(p in m){c=m[p],p+=u;break}if(p+=u,t?p<0:d<=p)throw TypeError("Reduce of empty array with no initial value")}for(;t?p>=0:d>p;p+=u)p in m&&(c=a(c,m[p],p,r));return c}};t.exports={left:o(!1),right:o(!0)}},fa07:function(t,e,a){"use strict";var i=a("1d35"),s=a.n(i);s.a}}]);
//# sourceMappingURL=chunk-34eea88a.87be9afb.js.map