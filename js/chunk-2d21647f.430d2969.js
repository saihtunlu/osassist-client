(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21647f"],{c293:function(t,e,a){"use strict";a.r(e);a("14d9");var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[t.isReady?e("div",{staticClass:"col-12 mt-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 flex-x-between mb-3"},[e("div",{staticClass:"flex-align-center"},[e("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"no-width flat",attrs:{type:"primary",circle:""},on:{click:function(e){return t.$router.push("/finance")}}},[e("i",{staticClass:"bx bx-left-arrow-alt"})]),e("h5",{staticClass:"my-0 ml-2"},[t._v(t._s(t.finance.date))]),"Incomes"==t.finance.type?e("el-tag",{staticClass:"rounded ml-2",attrs:{type:"success"}},[e("i",{staticClass:"bx bx-down-arrow-circle"}),t._v(" "+t._s(t.finance.type))]):t._e(),"Expense"==t.finance.type?e("el-tag",{staticClass:"rounded ml-2",attrs:{type:"danger"}},[e("i",{staticClass:"bx bx-up-arrow-circle"}),t._v(t._s(t.finance.type))]):t._e()],1),e("div",{staticClass:"flex-align-center flex-end"},[t.startEditing?e("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"flat animated fadeInRight",attrs:{type:"primary"},on:{click:t.cancelEdit}},[t._v(" Discard ")]):t._e(),t.startEditing?e("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"animated fadeInRight",attrs:{disabled:!t.startEditing,loading:t.saving,type:"primary"},on:{click:t.Post}},[t._v(" Save ")]):t._e(),e("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],attrs:{type:"danger",loading:t.removing},on:{click:t.removeFinance}},[t._v(" Remove ")])],1)]),e("div",{staticClass:"col-lg-8"},[e("div",{staticClass:"box"},[e("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Details")]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-6"},[e("label",{staticClass:"custom-label",attrs:{for:"name"}},[t._v("Note")]),e("el-input",{staticClass:"w-100 mb-3",attrs:{name:"name"},model:{value:t.finance.note,callback:function(e){t.$set(t.finance,"note",e)},expression:"finance.note"}})],1),e("div",{staticClass:"col-lg-6"},[e("label",{staticClass:"custom-label",attrs:{for:"name"}},[t._v("Label")]),e("el-select",{staticClass:"w-100",attrs:{filterable:"","allow-create":"",clearable:"",placeholder:"Label"},model:{value:t.finance.label_name,callback:function(e){t.$set(t.finance,"label_name",e)},expression:"finance.label_name"}},t._l(t.labels,(function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1)],1),e("div",{staticClass:"col-lg-6"},[e("label",{staticClass:"custom-label",attrs:{for:"date"}},[t._v("Date")]),e("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd/MM/yyyy","value-format":"dd/MM/yyyy",placeholder:"Pick a date"},model:{value:t.finance.date,callback:function(e){t.$set(t.finance,"date",e)},expression:"finance.date"}})],1),e("div",{staticClass:"col-lg-6"},[e("label",{staticClass:"custom-label",attrs:{for:"Phone"}},[t._v("Amount")]),e("el-input",{staticClass:"w-100 mb-3",attrs:{name:"Amount",type:"number"},model:{value:t.finance.amount,callback:function(e){t.$set(t.finance,"amount",e)},expression:"finance.amount"}})],1)])])])])]):t._e()])},i=[],n=a("2f62"),l={data(){return{saving:!1,finance:{},loading:null,startEditing:!1,financeBeforeEdit:"",labels:[],removing:!1}},watch:{finance:{handler:function(t){this.financeBeforeEdit==JSON.stringify(t)?this.startEditing=!1:this.startEditing=!0},deep:!0}},created(){this.filterfinance(),this.getLabels()},beforeMount(){window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",()=>{window.removeEventListener("beforeunload",this.preventNav)})},beforeRouteLeave(t,e,a){this.startEditing?this.$smalltalk.confirm("Question","Do you really want to leave? you have unsaved changes!").then(()=>{a()}).catch(()=>{a(!1)}):a()},methods:{preventNav(t){this.startEditing&&(t.preventDefault(),t.returnValue="")},getLabels(){var t="labels";this.$axios.get(t).then(t=>{this.labels=t.data}).catch(t=>{this.$noti.display({message:t,status:"error",color:"error"})})},filterfinance(){this.$store.commit("setIsReady",!1),this.$axios.get("finance/?finance_id="+this.$route.params.id).then(t=>{this.finance=t.data,this.financeBeforeEdit=JSON.stringify(t.data),setTimeout(()=>{this.startEditing=!1},10),this.$store.commit("setIsReady",!0)}).catch(t=>{this.$noti.display({message:t,title:"",status:"error",color:"error"})})},cancelEdit(){this.finance=JSON.parse(this.financeBeforeEdit),setTimeout(()=>{this.startEditing=!1},10)},Post(){this.saving=!0,this.$axios.put("finance/",{data:this.finance}).then(t=>{this.saving=!1,this.financeBeforeEdit=JSON.stringify(t.data),this.finance=t.data,this.startEditing=!1,this.$noti.display({title:"Success",status:"normal",color:"success",message:"Cool! finance has been successfully updated."}),setTimeout(()=>{this.$router.push("/finance")},500)}).catch(t=>{this.saving=!1,this.$noti.display({message:t,title:"",status:"error",color:"error"})})},removeFinance(){this.removing=!0,this.$axios.post("remove-finances/",{data:[this.finance.id]}).then(()=>{this.$noti.display({message:"Cool! Item has been successfully deleted.",title:"success",status:"normal",color:"success"}),this.removing=!1,this.$router.push("/finance")})}},computed:{...Object(n["c"])(["isReady","store"])}},c=l,r=a("2877"),o=Object(r["a"])(c,s,i,!1,null,null,null);e["default"]=o.exports}}]);
//# sourceMappingURL=chunk-2d21647f.430d2969.js.map