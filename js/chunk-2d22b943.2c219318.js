(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22b943"],{f025:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 mt-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 flex-x-between mb-3"},[e("div",{staticClass:"flex-align-center"},[e("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"no-width my-0 flat",attrs:{type:"primary",circle:""},on:{click:function(e){return t.$router.go(-1)}}},[e("i",{staticClass:"bx bx-left-arrow-alt"})]),e("h5",{staticClass:"my-0 ml-2"},[t._v("Add product")])],1),e("div",{staticClass:"flex-align-center sm-hide flex-end"},[e("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"flat my-0",attrs:{type:"primary"},on:{click:function(e){return t.$router.go(-1)}}},[e("i",{staticClass:"bx bx-x mr-1"}),t._v("Discard ")]),e("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"my-0",attrs:{disabled:!t.startEditing,loading:t.saving,type:"primary"},on:{click:t.Post}},[e("i",{staticClass:"bx bx-save mr-1"}),t._v("Save ")])],1)]),e("div",{staticClass:"col-lg-8 col-md-cu-8 pr-lg-0"},[e("div",{staticClass:"box"},[e("div",{staticClass:"flex-x-between"},[e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-12 mb-3"},[e("label",{staticClass:"custom-label",attrs:{for:"Media"}},[t._v("Media")]),e("file",{key:t.product.name,attrs:{initialData:t.product.image?[{image:t.product.image}]:[{}]},on:{completed:t.setImage}})],1),e("div",{staticClass:"col-12 mb-3"},[e("label",{staticClass:"custom-label",attrs:{for:"Name"}},[t._v("Name")]),e("el-input",{staticClass:"w-100",attrs:{name:"Name"},model:{value:t.product.name,callback:function(e){t.$set(t.product,"name",e)},expression:"product.name"}})],1),"supplier"!==t.store.type?e("div",{staticClass:"col-lg-6 mb-3"},[e("label",{staticClass:"custom-label",attrs:{for:"Link"}},[t._v("Price per item (MMK)")]),e("el-input",{staticClass:"w-100",attrs:{type:"number"},model:{value:t.product.cost_per_item,callback:function(e){t.$set(t.product,"cost_per_item",e)},expression:"product.cost_per_item"}})],1):t._e(),e("div",{staticClass:"col-lg-6 mb-3"},[e("label",{staticClass:"custom-label",attrs:{for:"Link"}},[t._v("Selling Price(MMK)")]),e("el-input",{staticClass:"w-100",attrs:{name:"Sale Price(MMK)",type:"number"},model:{value:t.product.price,callback:function(e){t.$set(t.product,"price",e)},expression:"product.price"}})],1),e("div",{staticClass:"col-lg-6 mb-3"},[e("label",{staticClass:"custom-label",attrs:{for:"Link"}},[t._v("Quantity")]),e("el-input-number",{staticClass:"w-100",attrs:{min:0,"controls-position":"right"},model:{value:t.product.number_of_stock,callback:function(e){t.$set(t.product,"number_of_stock",e)},expression:"product.number_of_stock"}})],1),e("div",{staticClass:"col-lg-6"},[e("label",{staticClass:"custom-label",attrs:{for:"Link"}},[t._v("Barcode")]),e("el-input",{staticClass:"w-100",model:{value:t.product.barcode,callback:function(e){t.$set(t.product,"barcode",e)},expression:"product.barcode"}})],1)])])])]),e("div",{staticClass:"col-lg-12 md-hide lg-hide"},[e("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"my-3 mx-0 w-100",attrs:{loading:t.saving,disabled:!t.startEditing,type:"primary"},on:{click:t.Post}},[e("i",{staticClass:"bx bx-save mr-1"}),t._v("Save ")]),e("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"flat mt-0 mb-3 mx-0 w-100",attrs:{type:"primary"},on:{click:function(e){return t.$router.go(-1)}}},[e("i",{staticClass:"bx bx-x mr-1"}),t._v("Discard ")])],1)])])])},i=[],r=(s("14d9"),s("2f62")),l=s("9c83"),o=s("d50a"),c={data(){return{url:l["c"],mediaUrl:l["b"],product:{name:"",number_of_stock:"1",price:"0",cost_per_item:"0",image:"media/default.png",barcode:null},saving:!1,startEditing:!1}},components:{file:o["c"]},watch:{product:{handler:function(){this.startEditing=!0},deep:!0}},mounted(){setTimeout(()=>{this.startEditing=!1},100),this.$store.commit("setIsReady",!0);const t=(new Date/100).toFixed(0),e=(""+t).substr(t.length-6);this.product.barcode="YV3621"+e},beforeMount(){window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",()=>{window.removeEventListener("beforeunload",this.preventNav)})},beforeRouteLeave(t,e,s){this.startEditing?this.$smalltalk.confirm("Question","Do you really want to leave? you have unsaved changes!").then(()=>{s()}).catch(()=>{s(!1)}):s()},methods:{preventNav(t){this.startEditing&&(t.preventDefault(),t.returnValue="")},setImage(t){this.product.image=t[0].image},Post(){this.saving=!0,this.store=this.store.id,this.$axios.post("product/",{data:this.product}).then(t=>{this.startEditing=!1,this.saving=!1,this.$noti.display({title:"Success",color:"success",message:"Cool! Sale has been successfully added."}),this.$router.push({name:"Edit product",params:{id:t.data.id}})}).catch(t=>{this.saving=!1,this.$noti.display({message:t,title:"",status:"error",color:"error"})})}},computed:{...Object(r["c"])(["isReady","store"])}},n=c,d=s("2877"),u=Object(d["a"])(n,a,i,!1,null,null,null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-2d22b943.2c219318.js.map