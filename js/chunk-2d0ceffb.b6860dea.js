(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ceffb"],{"629b":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e._self._c;return e.isReady?t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 flex-x-between mt-3"},[t("div",{staticClass:"flex-align-center"},[t("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"no-width flat",attrs:{type:"primary",circle:""},on:{click:function(t){return e.$router.go(-1)}}},[t("i",{staticClass:"bx bx-left-arrow-alt"})]),t("h5",{staticClass:"my-0 ml-2"},[e._v("Media library")])],1),t("div",{staticClass:"flex-align-center flex-end"},[t("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],attrs:{loading:e.saving,type:"primary"},on:{click:e.Post}},[t("i",{staticClass:"bx bx-save mr-1"}),e._v(" Save ")])],1)]),t("div",{staticClass:"col-12 mt-3"},[t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box pb-0"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 flex-x-between"},[t("div",{staticClass:"flex-align-center"},[t("p",{staticClass:"mx-0 table-tab",class:"setting"===e.activeName&&"active-table-tab",on:{click:function(t){e.activeName="setting"}}},[e._v(" Setting ")])])]),e._m(0),t("div",{staticClass:"col-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 mt-2 mb-3"},[t("el-alert",{attrs:{title:"Warning!",closable:!1,type:"error"}},[t("p",[e._v(" Please do not change anything without the help of developer."),t("br"),e._v(" You can read more about Cloudinary "),t("a",{attrs:{href:"https://cloudinary.com/",target:"_blank"}},[e._v("here")]),e._v(". ")])])],1),t("div",{staticClass:"col-lg-6"},[t("label",{staticClass:"custom-label"},[e._v("Cloud name")]),t("el-input",{staticClass:"w-100 mb-3",attrs:{name:""},model:{value:e.media_key.cloud_name,callback:function(t){e.$set(e.media_key,"cloud_name",t)},expression:"media_key.cloud_name"}}),t("label",{staticClass:"custom-label"},[e._v("API Key")]),t("el-input",{staticClass:"w-100 mb-3",attrs:{name:""},model:{value:e.media_key.api_key,callback:function(t){e.$set(e.media_key,"api_key",t)},expression:"media_key.api_key"}})],1),t("div",{staticClass:"col-lg-6"},[t("label",{staticClass:"custom-label"},[e._v("Upload presets")]),t("el-input",{staticClass:"w-100 mb-3",attrs:{name:""},model:{value:e.media_key.upload_preset,callback:function(t){e.$set(e.media_key,"upload_preset",t)},expression:"media_key.upload_preset"}})],1)])])])])])]):e._e()},i=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"col-12"},[t("div",{staticClass:"b-divider mb-1 mt-0"})])}],l=(s("14d9"),s("2f62")),o=s("9c83"),r={data(){return{storeData:{cloud_name:"",api_key:"",upload_preset:""},mediaUrl:o["b"],appUrl:o["a"],activeName:"media",selected:[],loading:!1,active:!1,index:null,lightBoxFiles:[],saving:!1,media_key:{cloud_name:"",api_key:"",upload_preset:""}}},computed:{...Object(l["c"])(["files","isReady","store"])},watch:{file(e){e&&(this.file.forEach(e=>{e.isSelected=!1,this.lightBoxFiles.push(this.mediaUrl+e.image)}),this.$store.commit("setIsReady",!0))},store(e){this.media_key=JSON.parse(e.fbLink)}},mounted(){this.$store.commit("setIsReady",!1),this.store&&(this.media_key=JSON.parse(this.store.fbLink)),this.$store.commit("setIsReady",!0),this.files&&this.files.forEach(e=>{e.isSelected=!1,this.lightBoxFiles.push(this.mediaUrl+e.image)})},methods:{changeSelect(){this.selected=this.files.filter(e=>e.isSelected)},Post(){this.$smalltalk.confirm("Question","Are you sure you want to update cloudinary detail?").then(()=>{this.saving=!0;var e=this.store;e.fbLink=JSON.stringify(this.media_key),this.$axios.put("store/",{data:e}).then(e=>{this.$store.commit("setStore",e.data),this.saving=!1,this.$noti.display({color:"success",title:"Success",message:"Cool! Store has been successfully updated."})})})},setHeight(e){e.path[0].style.height=e.path[0].clientWidth+"px"},async onFileChange(e){if(!/\.(jpg|jpeg|png|JPG|PNG)$/.test(e.target.value))return alert("The file uploaded need to be -jpeg,jpg,png"),!1;if(e.target.files[0].size/1e6>1)return alert("Max image file size is 1MB!"),!1;this.loading=!0;var t=e.target.files[0];const s=new FormData;s.append("file",t),s.append("upload_preset",this.media_key.upload_preset),s.append("api_key",this.media_key.api_key),s.append("timestamp",Date.now()/1e3|0);var a=await fetch(`https://api.cloudinary.com/v1_1/${this.media_key.cloud_name}/image/upload`,{method:"POST",body:s});const i=await a.json();this.uploadImageToServer({image:i.secure_url})},uploadImageToServer(e){this.$axios.post("files/",{data:e}).then(()=>{this.$store.commit("addFile",[e]),this.activeName="media",this.loading=!1}).catch(e=>{this.loading=!1,this.$noti.display({message:e,status:"error",color:"error"})})},removeFiles(){if(this.selected.length>0){this.loading=!0;var e=[];this.selected.forEach(t=>{e.push(t.id)}),this.$axios.post("remove-files/",{data:e}).then(()=>{this.$store.commit("removeFile",e),this.selected=[],this.loading=!1,this.$noti.display({message:"Cool! File has been successfully deleted.",title:"success",color:"success"})}).catch(e=>{this.$noti.display({message:e,status:"error",color:"error"}),this.loading=!1})}}}},c=r,d=s("2877"),n=Object(d["a"])(c,a,i,!1,null,"44afe71b",null);t["default"]=n.exports}}]);
//# sourceMappingURL=chunk-2d0ceffb.b6860dea.js.map