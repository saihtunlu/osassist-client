(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1576fc7c"],{1276:function(t,e,s){"use strict";var a=s("d784"),i=s("44e7"),n=s("825a"),l=s("1d80"),r=s("4840"),o=s("8aa5"),c=s("50c4"),u=s("14c3"),d=s("9263"),p=s("d039"),m=[].push,f=Math.min,h=4294967295,v=!p((function(){return!RegExp(h,"y")}));a("split",2,(function(t,e,s){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,s){var a=String(l(this)),n=void 0===s?h:s>>>0;if(0===n)return[];if(void 0===t)return[a];if(!i(t))return e.call(a,t,n);var r,o,c,u=[],p=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,v=new RegExp(t.source,p+"g");while(r=d.call(v,a)){if(o=v.lastIndex,o>f&&(u.push(a.slice(f,r.index)),r.length>1&&r.index<a.length&&m.apply(u,r.slice(1)),c=r[0].length,f=o,u.length>=n))break;v.lastIndex===r.index&&v.lastIndex++}return f===a.length?!c&&v.test("")||u.push(""):u.push(a.slice(f)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(t,s){return void 0===t&&0===s?[]:e.call(this,t,s)}:e,[function(e,s){var i=l(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,i,s):a.call(String(i),e,s)},function(t,i){var l=s(a,t,this,i,a!==e);if(l.done)return l.value;var d=n(t),p=String(this),m=r(d,RegExp),g=d.unicode,y=(d.ignoreCase?"i":"")+(d.multiline?"m":"")+(d.unicode?"u":"")+(v?"y":"g"),_=new m(v?d:"^(?:"+d.source+")",y),b=void 0===i?h:i>>>0;if(0===b)return[];if(0===p.length)return null===u(_,p)?[p]:[];var C=0,x=0,w=[];while(x<p.length){_.lastIndex=v?x:0;var P,k=u(_,v?p:p.slice(x));if(null===k||(P=f(c(_.lastIndex+(v?0:x)),p.length))===C)x=o(p,x,g);else{if(w.push(p.slice(C,x)),w.length===b)return w;for(var S=1;S<=k.length-1;S++)if(w.push(k[S]),w.length===b)return w;x=C=P}}return w.push(p.slice(C)),w}]}),!v)},"549d":function(t,e,s){"use strict";var a=s("d028"),i=s.n(a);i.a},"70b0":function(t,e,s){(function(e){"use strict";var s=_(),a=b(),i=C(),n=x(),l={imagePlaceholder:void 0,cacheBust:!1},r={toSvg:o,toPng:u,toJpeg:d,toBlob:p,toPixelData:c,impl:{fontFaces:i,images:n,util:s,inliner:a,options:{}}};function o(t,e){return e=e||{},m(e),Promise.resolve(t).then((function(t){return h(t,e.filter,!0)})).then(v).then(g).then(a).then((function(a){return y(a,e.width||s.width(t),e.height||s.height(t))}));function a(t){return e.bgcolor&&(t.style.backgroundColor=e.bgcolor),e.width&&(t.style.width=e.width+"px"),e.height&&(t.style.height=e.height+"px"),e.style&&Object.keys(e.style).forEach((function(s){t.style[s]=e.style[s]})),t}}function c(t,e){return f(t,e||{}).then((function(e){return e.getContext("2d").getImageData(0,0,s.width(t),s.height(t)).data}))}function u(t,e){return f(t,e||{}).then((function(t){return t.toDataURL()}))}function d(t,e){return e=e||{},f(t,e).then((function(t){return t.toDataURL("image/jpeg",e.quality||1)}))}function p(t,e){return f(t,e||{}).then(s.canvasToBlob)}function m(t){"undefined"===typeof t.imagePlaceholder?r.impl.options.imagePlaceholder=l.imagePlaceholder:r.impl.options.imagePlaceholder=t.imagePlaceholder,"undefined"===typeof t.cacheBust?r.impl.options.cacheBust=l.cacheBust:r.impl.options.cacheBust=t.cacheBust}function f(t,e){return o(t,e).then(s.makeImage).then(s.delay(100)).then((function(e){var s=a(t);return s.getContext("2d").drawImage(e,0,0),s}));function a(t){var a=document.createElement("canvas");if(a.width=e.width||s.width(t),a.height=e.height||s.height(t),e.bgcolor){var i=a.getContext("2d");i.fillStyle=e.bgcolor,i.fillRect(0,0,a.width,a.height)}return a}}function h(t,e,a){return a||!e||e(t)?Promise.resolve(t).then(i).then((function(s){return n(t,s,e)})).then((function(e){return l(t,e)})):Promise.resolve();function i(t){return t instanceof HTMLCanvasElement?s.makeImage(t.toDataURL()):t.cloneNode(!1)}function n(t,e,a){var i=t.childNodes;return 0===i.length?Promise.resolve(e):n(e,s.asArray(i),a).then((function(){return e}));function n(t,e,s){var a=Promise.resolve();return e.forEach((function(e){a=a.then((function(){return h(e,s)})).then((function(e){e&&t.appendChild(e)}))})),a}}function l(t,e){return e instanceof Element?Promise.resolve().then(a).then(i).then(n).then(l).then((function(){return e})):e;function a(){function a(t,e){function a(t,e){s.asArray(t).forEach((function(s){e.setProperty(s,t.getPropertyValue(s),t.getPropertyPriority(s))}))}t.cssText?e.cssText=t.cssText:a(t,e)}a(window.getComputedStyle(t),e.style)}function i(){function a(a){var i=window.getComputedStyle(t,a),n=i.getPropertyValue("content");if(""!==n&&"none"!==n){var l=s.uid();e.className=e.className+" "+l;var r=document.createElement("style");r.appendChild(o(l,a,i)),e.appendChild(r)}function o(t,e,a){var i="."+t+":"+e,n=a.cssText?l(a):r(a);return document.createTextNode(i+"{"+n+"}");function l(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}function r(t){return s.asArray(t).map(e).join("; ")+";";function e(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")}}}}[":before",":after"].forEach((function(t){a(t)}))}function n(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}function l(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach((function(t){var s=e.getAttribute(t);s&&e.style.setProperty(t,s)})))}}}function v(t){return i.resolveAll().then((function(e){var s=document.createElement("style");return t.appendChild(s),s.appendChild(document.createTextNode(e)),t}))}function g(t){return n.inlineAll(t).then((function(){return t}))}function y(t,e,a){return Promise.resolve(t).then((function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)})).then(s.escapeXhtml).then((function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"})).then((function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+a+'">'+t+"</svg>"})).then((function(t){return"data:image/svg+xml;charset=utf-8,"+t}))}function _(){return{escape:p,parseExtension:e,mimeType:s,dataAsUrl:d,isDataUrl:a,canvasToBlob:n,resolveUrl:l,getAndEncode:u,uid:o(),delay:m,asArray:f,escapeXhtml:h,makeImage:c,width:v,height:g};function t(){var t="application/font-woff",e="image/jpeg";return{woff:t,woff2:t,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:e,jpeg:e,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"}}function e(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function s(s){var a=e(s).toLowerCase();return t()[a]||""}function a(t){return-1!==t.search(/^(data:)/)}function i(t){return new Promise((function(e){for(var s=window.atob(t.toDataURL().split(",")[1]),a=s.length,i=new Uint8Array(a),n=0;n<a;n++)i[n]=s.charCodeAt(n);e(new Blob([i],{type:"image/png"}))}))}function n(t){return t.toBlob?new Promise((function(e){t.toBlob(e)})):i(t)}function l(t,e){var s=document.implementation.createHTMLDocument(),a=s.createElement("base");s.head.appendChild(a);var i=s.createElement("a");return s.body.appendChild(i),a.href=e,i.href=t,i.href}function o(){var t=0;return function(){return"u"+e()+t++;function e(){return("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)}}}function c(t){return new Promise((function(e,s){var a=new Image;a.onload=function(){e(a)},a.onerror=s,a.src=t}))}function u(t){var e=3e4;return r.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime()),new Promise((function(s){var a,i=new XMLHttpRequest;if(i.onreadystatechange=l,i.ontimeout=o,i.responseType="blob",i.timeout=e,i.open("GET",t,!0),i.send(),r.impl.options.imagePlaceholder){var n=r.impl.options.imagePlaceholder.split(/,/);n&&n[1]&&(a=n[1])}function l(){if(4===i.readyState)if(200===i.status){var e=new FileReader;e.onloadend=function(){var t=e.result.split(/,/)[1];s(t)},e.readAsDataURL(i.response)}else a?s(a):c("cannot fetch resource: "+t+", status: "+i.status)}function o(){a?s(a):c("timeout of "+e+"ms occured while fetching resource: "+t)}function c(t){console.error(t),s("")}}))}function d(t,e){return"data:"+e+";base64,"+t}function p(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")}function m(t){return function(e){return new Promise((function(s){setTimeout((function(){s(e)}),t)}))}}function f(t){for(var e=[],s=t.length,a=0;a<s;a++)e.push(t[a]);return e}function h(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")}function v(t){var e=y(t,"border-left-width"),s=y(t,"border-right-width");return t.scrollWidth+e+s}function g(t){var e=y(t,"border-top-width"),s=y(t,"border-bottom-width");return t.scrollHeight+e+s}function y(t,e){var s=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(s.replace("px",""))}}function b(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:n,shouldProcess:e,impl:{readUrls:a,inline:i}};function e(e){return-1!==e.search(t)}function a(e){var a,i=[];while(null!==(a=t.exec(e)))i.push(a[1]);return i.filter((function(t){return!s.isDataUrl(t)}))}function i(t,e,a,i){return Promise.resolve(e).then((function(t){return a?s.resolveUrl(t,a):t})).then(i||s.getAndEncode).then((function(t){return s.dataAsUrl(t,s.mimeType(e))})).then((function(s){return t.replace(n(e),"$1"+s+"$3")}));function n(t){return new RegExp("(url\\(['\"]?)("+s.escape(t)+")(['\"]?\\))","g")}}function n(t,s,n){return l()?Promise.resolve(t):Promise.resolve(t).then(a).then((function(e){var a=Promise.resolve(t);return e.forEach((function(t){a=a.then((function(e){return i(e,t,s,n)}))})),a}));function l(){return!e(t)}}}function C(){return{resolveAll:t,impl:{readAll:e}};function t(){return e(document).then((function(t){return Promise.all(t.map((function(t){return t.resolve()})))})).then((function(t){return t.join("\n")}))}function e(){return Promise.resolve(s.asArray(document.styleSheets)).then(e).then(t).then((function(t){return t.map(i)}));function t(t){return t.filter((function(t){return t.type===CSSRule.FONT_FACE_RULE})).filter((function(t){return a.shouldProcess(t.style.getPropertyValue("src"))}))}function e(t){var e=[];return t.forEach((function(t){try{s.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(a){console.log("Error while reading CSS rules from "+t.href,a.toString())}})),e}function i(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return a.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}function x(){return{inlineAll:e,impl:{newImage:t}};function t(t){return{inline:e};function e(e){return s.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||s.getAndEncode).then((function(e){return s.dataAsUrl(e,s.mimeType(t.src))})).then((function(e){return new Promise((function(s,a){t.onload=s,t.onerror=a,t.src=e}))}))}}function e(i){return i instanceof Element?n(i).then((function(){return i instanceof HTMLImageElement?t(i).inline():Promise.all(s.asArray(i.childNodes).map((function(t){return e(t)})))})):Promise.resolve(i);function n(t){var e=t.style.getPropertyValue("background");return e?a.inlineAll(e).then((function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))})).then((function(){return t})):Promise.resolve(t)}}}t.exports=r})()},"857a":function(t,e,s){var a=s("1d80"),i=/"/g;t.exports=function(t,e,s,n){var l=String(a(t)),r="<"+e;return""!==s&&(r+=" "+s+'="'+String(n).replace(i,"&quot;")+'"'),r+">"+l+"</"+e+">"}},"98da":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.isReady?s("div",{staticClass:"row"},[s("div",{attrs:{id:"print-area"}},[s("div",{staticClass:"printer-box"},[s("div",{staticClass:"flex-x-between header-print"},[s("img",{attrs:{src:"/logo.png",alt:""}}),s("p",{staticStyle:{"font-size":"2.7mm !important",padding:"1mm","border-right":"1px solid","margin-bottom":"0px !important"}},[t._v(" 09975492181, 09941305965, Ground Floor, No.18, 58th st ဗဟိုလမ်း, Hlaing tsp, Yangon ")]),s("div",[s("p",{staticStyle:{"font-size":"2.7mm !important",padding:"1mm","margin-bottom":"0px !important"}},[t._v(" "+t._s(t.$moment().format("DD/MM/YYYY"))+" ")]),s("p",{staticStyle:{"font-size":"2.7mm !important",padding:"1mm","margin-bottom":"0px !important"}},[t._v(" ID : #"+t._s(t.sale.id)+" ")])])]),s("div",{staticClass:"print-content"},[s("p",[s("i",{staticClass:"bx bxs-user"}),t._v(" : "+t._s(t.sale.customer_name))]),s("p",[s("i",{staticClass:"bx bxs-phone"}),t._v(" : "+t._s(t.sale.phone))]),s("p",[s("i",{staticClass:"bx bxs-map"}),t._v(" : "),t.sale.address.address?s("span",[t._v(t._s(t.sale.address.address+" ,"))]):t._e(),t._v(" "+t._s(t.formatString(t.sale.address.city))+", "+t._s(t.formatString(t.sale.address.state))+" ")])]),s("div",{staticClass:"footer"},[s("div",{staticClass:"flex-x-between"},[s("span",[t._v("Note : "+t._s(t.sale.note||""))]),s("span",[t._v("Delivery : "+t._s(t.sale.delivery_company_name||"-"))])]),s("span",[t._v("Thanks for supporting my business 🖤")])])])]),s("div",{staticClass:"col-12 mt-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 flex-x-between mb-3"},[s("div",{staticClass:"flex-align-center"},[s("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"no-width my-0 flat",attrs:{type:"primary",circle:""},on:{click:function(e){return t.$router.go(-1)}}},[s("i",{staticClass:"bx bx-left-arrow-alt"})]),s("h5",{staticClass:"my-0 mr-2 ml-2"},[t._v(t._s(t.sale.sale_no))]),s("el-tag",{staticClass:"rounded sm-hide mr-2",attrs:{type:"primary"}},[t._v(t._s(t.sale.status))]),"Paid"==t.sale.payment_status?s("el-tag",{staticClass:"rounded sm-hide mr-2",attrs:{type:"success"}},[s("i",{staticClass:"bx bx-check-circle"}),t._v(t._s(t.sale.payment_status))]):t._e(),"Unpaid"==t.sale.payment_status?s("el-tag",{staticClass:"rounded sm-hide mr-2",attrs:{type:"danger"}},[s("i",{staticClass:"bx bx-time-five"}),t._v(t._s(t.sale.payment_status))]):t._e(),"Partially Paid"==t.sale.payment_status?s("el-tag",{staticClass:"rounded sm-hide mr-2",attrs:{type:"warning"}},[s("i",{staticClass:"bx bx-time-five"}),t._v(t._s(t.sale.payment_status))]):t._e(),t.sale.is_fulfilled?s("el-tag",{staticClass:"rounded sm-hide mr-2",attrs:{type:"success"}},[t._v("Fulfilled")]):s("el-tag",{staticClass:"rounded sm-hide mr-2",attrs:{type:"warning"}},[s("i",{staticClass:"bx bx-time-five"}),t._v(" Unfulfilled")])],1),s("div",{staticClass:"flex-align-center sm-hide flex-end"},[t.startEditing&&!t.gettingSale?s("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"flat",attrs:{type:"primary"},on:{click:t.discardEditingSale}},[t._v(" Discard ")]):t._e(),t.startEditing&&!t.gettingSale?s("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],attrs:{disabled:!t.startEditing,loading:t.saving,type:"primary"},on:{click:t.Put}},[t._v(" Save ")]):t._e(),s("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"mr-2",attrs:{type:"primary"},on:{click:function(e){return t.updateStatus("Completed")}}},[t._v(" Mark as Completed ")]),s("el-dropdown",{attrs:{"split-button":"",type:"primary",trigger:"click"},on:{command:t.changeActions}},[t._v(" More actions "),s("el-dropdown-menu",{staticClass:"button-dropdown",attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{command:"Canceled"}},[s("i",{staticClass:"bx bx-x mr-2"}),t._v("Cancel order")]),s("el-dropdown-item",{attrs:{command:"Archived"}},[s("i",{staticClass:"bx bx-box mr-2"}),t._v(" Archive")]),s("el-dropdown-item",{attrs:{command:"Print"}},[s("i",{staticClass:"bx bx-box mr-2"}),t._v(" Print Address")]),"supplier"!==t.store.type?s("el-dropdown-item",{attrs:{command:"pdf"}},[s("i",{staticClass:"bx bx-printer mr-2"}),t._v(" Export voucher")]):t._e(),"supplier"==t.store.type?s("el-dropdown-item",{attrs:{command:"printCode"}},[s("i",{staticClass:"bx bx-printer mr-2"}),t._v(" Export Code")]):t._e()],1)],1)],1)]),s("div",{staticClass:"col-12 lg-hide mb-3 md-hide flex-align-center"},[s("el-tag",{staticClass:"rounded mr-2",attrs:{type:"primary"}},[t._v(t._s(t.sale.status))]),"Paid"==t.sale.payment_status?s("el-tag",{staticClass:"rounded mr-2",attrs:{type:"success"}},[s("i",{staticClass:"bx bx-check-circle"}),t._v(t._s(t.sale.payment_status))]):t._e(),"Unpaid"==t.sale.payment_status?s("el-tag",{staticClass:"rounded mr-2",attrs:{type:"danger"}},[s("i",{staticClass:"bx bx-time-five"}),t._v(t._s(t.sale.payment_status))]):t._e(),"Partially Paid"==t.sale.payment_status?s("el-tag",{staticClass:"rounded mr-2",attrs:{type:"warning"}},[s("i",{staticClass:"bx bx-time-five"}),t._v(t._s(t.sale.payment_status))]):t._e(),t.sale.is_fulfilled?s("el-tag",{staticClass:"rounded mr-2",attrs:{type:"success"}},[t._v("Fulfilled")]):s("el-tag",{staticClass:"rounded mr-2",attrs:{type:"warning"}},[s("i",{staticClass:"bx bx-time-five"}),t._v(" Unfulfilled")])],1),s("div",{staticClass:"col-lg-8 col-md-cu-8 pr-lg-0"},[s("div",{staticClass:"box"},[s("div",{staticClass:"flex-x-between"},[s("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Items")]),s("div",{staticClass:"d-flex align-items-center"},[s("p",{staticClass:"mt-0 mr-2 pointer sm-hide primary hover-underline",on:{click:t.openFulfill}},[t._v(" Add fulfillment ")]),s("p",{staticClass:"mt-0 pointer primary hover-underline",on:{click:t.addItem}},[s("i",{staticClass:"bx bx-plus mr-1"}),t._v("Add item ")])])]),s("div",{staticClass:"row"},["normal"==t.store.type?s("div",{staticClass:"col-12"},[s("el-select",{staticClass:"w-100 my-3 my-sm-2",attrs:{filterable:"",remote:"","reserve-keyword":"",placeholder:"search product","remote-method":t.getProducts,loading:t.loadingProduct},model:{value:t.productQuery,callback:function(e){t.productQuery=e},expression:"productQuery"}},t._l(t.products,(function(t){return s("el-option",{key:t.id,attrs:{label:t.name+" / "+t.barcode||"",value:t}})})),1)],1):t._e(),t.sale.products.length>0?s("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingProduct,expression:"loadingProduct"}],staticClass:"col-12"},[s("el-collapse",t._l(t.sale.products,(function(e,a){return s("el-collapse-item",{key:a,attrs:{name:a}},[s("template",{slot:"title"},[s("div",{staticClass:"flex-x-between w-100 collapse-header"},[s("div",{staticClass:"flex-align-center"},[s("p",{staticClass:"mr-3"},[t._v(" No."+t._s(a+1)+" / "+t._s(e.name)+" - "+t._s(e.subtotal)+t._s("supplier"===t.store.type?"¥":"MMK")+" ")]),e.link&&"supplier"==t.store.type?s("p",{staticClass:"primary-flat sm-hide",staticStyle:{background:"rgba(var(--success), 0.2) !important",color:"rgba(var(--success), 1) !important",height:"20px",padding:"0px 5px","line-height":"20px"}},[t._v(" Has Code ")]):t._e(),e.link||"supplier"!=t.store.type?t._e():s("p",{staticClass:"danger-flat sm-hide",staticStyle:{height:"20px",padding:"0px 5px","line-height":"20px","border-radius":"4px"}},[t._v(" No Code ")]),t.isFulfilled(e)?s("p",{staticClass:"primary-flat ml-3 sm-hide",staticStyle:{background:"rgba(var(--success), 0.2) !important",color:"rgba(var(--success), 1) !important",height:"20px",padding:"0px 5px","line-height":"20px"}},[t._v(" Fulfilled on "+t._s(t.$moment(e.date).format("DD/MM/YYYY"))+" ")]):t._e()]),s("p",{staticClass:"danger hover-underline",staticStyle:{"margin-right":"8px","z-index":"10"},on:{click:function(s){return t.removeProduct(a,e.id)}}},[s("i",{staticClass:"bx bx-x"})])])]),s("div",{staticClass:"row mb-3"},[s("div",{staticClass:"col-12 mb-3"},[s("label",{staticClass:"custom-label",attrs:{for:"Media"}},[t._v("Media")]),s("file",{key:a+e.name,attrs:{initialData:e.image?[{image:e.image}]:[]},on:{completed:function(e){return t.setImage(e,a)}}})],1),s("div",{staticClass:"col-12 mb-3"},[s("label",{staticClass:"custom-label",attrs:{for:"Name"}},[t._v("Name")]),s("el-input",{staticClass:"w-100",attrs:{name:"Name"},model:{value:e.name,callback:function(s){t.$set(e,"name",s)},expression:"product.name"}})],1),"supplier"==t.store.type?s("div",{staticClass:"col-12 mb-3"},[s("label",{staticClass:"custom-label",attrs:{for:"Code"}},[t._v("Tracking Code")]),s("el-input",{staticClass:"w-100",attrs:{name:"Code"},model:{value:e.link,callback:function(s){t.$set(e,"link",s)},expression:"product.link"}})],1):t._e(),"supplier"!==t.store.type?s("div",{staticClass:"col-lg-6 mb-3"},[s("label",{staticClass:"custom-label",attrs:{for:"Link"}},[t._v("Capital price(MMK)")]),s("el-input",{staticClass:"w-100",attrs:{name:"Capital price(MMK)",type:"number"},on:{change:function(e){return t.calcPrice(a)}},model:{value:e.primary_price_myanmar,callback:function(s){t.$set(e,"primary_price_myanmar",s)},expression:"product.primary_price_myanmar"}})],1):t._e(),"supplier"!==t.store.type?s("div",{staticClass:"col-lg-6 mb-3"},[s("label",{staticClass:"custom-label",attrs:{for:"Link"}},[t._v("Selling Price(MMK)")]),s("el-input",{staticClass:"w-100",attrs:{name:"Sale Price(MMK)",type:"number"},on:{change:function(e){return t.calcPrice(a)}},model:{value:e.sale_price,callback:function(s){t.$set(e,"sale_price",s)},expression:"product.sale_price"}})],1):t._e(),s("div",{staticClass:"col-lg-6"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6"},[s("label",{staticClass:"custom-label",attrs:{for:"Link"}},[t._v("Quantity")]),s("el-input-number",{staticClass:"w-100",attrs:{min:0,"controls-position":"right"},on:{change:function(e){return t.changeQuantity(a)}},model:{value:e.quantity,callback:function(s){t.$set(e,"quantity",s)},expression:"product.quantity"}})],1),s("div",{staticClass:"col-6"},[s("label",{staticClass:"custom-label",attrs:{for:"Link"}},[t._v("Fulfilled")]),s("el-input-number",{staticClass:"w-100",attrs:{min:0,"controls-position":"right"},model:{value:e.number_of_fullfilled,callback:function(s){t.$set(e,"number_of_fullfilled",s)},expression:"product.number_of_fullfilled"}})],1)])]),"supplier"==t.store.type?s("div",{staticClass:"col-lg-6 mb-3"},[s("label",{staticClass:"custom-label",attrs:{for:"Link"}},[t._v("Price")]),s("el-input",{staticClass:"w-100",attrs:{name:"Price",type:"number"},on:{change:function(e){return t.calcPrice(a)}},model:{value:e.sale_price,callback:function(s){t.$set(e,"sale_price",s)},expression:"product.sale_price"}})],1):t._e(),"supplier"!==t.store.type?s("div",{staticClass:"d-flex justify-content-around col-lg-6 align-items-center"},[s("div",{staticClass:"d-flex justify-content-center align-items-center flex-column"},[s("p",{staticClass:"md-text"},[t._v("Margin")]),s("p",{staticClass:"mt-2"},[t._v(" "+t._s(e.margin?e.margin+"%":"-")+" ")])]),s("div",{staticClass:"d-flex justify-content-center align-items-center flex-column"},[s("p",{staticClass:"md-text"},[t._v("Profit(MMK)")]),s("p",{staticClass:"mt-2"},[t._v(" "+t._s(e.profit?e.profit:"-")+" ")])])]):t._e()])],2)})),1)],1):s("el-empty",{staticClass:"w-100",attrs:{description:"No item found!"},scopedSlots:t._u([{key:"image",fn:function(){return[s("empty")]},proxy:!0}],null,!1,81314202)})],1)]),s("div",{staticClass:"box mt-3"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12"},[s("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Pricing")]),s("div",{staticClass:"flex-x-between"},[s("p",{staticClass:"primary hover-underline pointer",on:{click:function(e){t.openDiscount=!t.openDiscount}}},[t._v(" Add discount ")]),s("p",{staticClass:"text-right"},["supplier"==t.store.type?s("span",[t._v(" ¥ ")]):t._e(),t._v(" "+t._s(0===parseFloat(t.sale.discount)?"-":t.sale.discount)+" "),"supplier"!==t.store.type?s("span",[t._v(" MMK ")]):t._e(),t.sale.discount_reason?s("span",{staticClass:"sm-text"},[s("br"),t._v(" "+t._s(t.sale.discount_reason)+" ")]):t._e()])]),s("el-divider"),s("div",{staticClass:"flex-x-between"},[s("p",{},[t._v("Subtotal")]),s("p",{},["supplier"==t.store.type?s("span",[t._v(" ¥ ")]):t._e(),t._v(" "+t._s(0===parseFloat(t.sale.subtotal)?"-":t.sale.subtotal)+" "),"supplier"!==t.store.type?s("span",[t._v(" MMK ")]):t._e()])]),s("el-divider"),"supplier"===t.store.type?s("div",{staticClass:"flex-x-between"},[s("p",{},[t._v("Supplier percentage")]),s("p",{},["supplier"==t.store.type?s("span",[t._v(" ¥ ")]):t._e(),t._v(" "+t._s(0===parseFloat(t.sale.subtotal)?"-":(parseFloat(t.sale.subtotal)*(parseFloat(t.sale.supplier_percentage)/100)).toFixed(2))+" ")])]):t._e(),"supplier"===t.store.type?s("el-divider"):t._e(),s("div",{staticClass:"flex-x-between"},[s("p",{},[t._v("Total")]),s("p",{},["supplier"==t.store.type?s("span",[t._v(" ¥ ")]):t._e(),t._v(" "+t._s(0===parseFloat(t.sale.total)?"-":t.sale.total)),"supplier"!==t.store.type?s("span",[t._v(" MMK ")]):t._e()])]),"supplier"===t.store.type?s("el-divider"):t._e(),"supplier"===t.store.type?s("div",{staticClass:"flex-x-between"},[s("p",{},[t._v("Purchased Amount")]),s("el-input",{staticStyle:{width:"150px"},on:{change:t.calcProfitAmount},model:{value:t.sale.purchase_amount,callback:function(e){t.$set(t.sale,"purchase_amount",e)},expression:"sale.purchase_amount"}})],1):t._e(),"supplier"===t.store.type?s("el-divider"):t._e(),"supplier"===t.store.type?s("div",{staticClass:"flex-x-between"},[s("p",{},[t._v("Profit Amount")]),s("p",{},[s("span",[t._v(" ¥ ")]),t._v(" "+t._s(0===parseFloat(t.sale.profit_amount)?"-":t.sale.profit_amount)+" ")])]):t._e()],1)])]),s("div",{staticClass:"box mt-3 mb-3"},[s("div",{staticClass:"flex-x-between mb-3"},[s("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Payments")]),s("div",{staticClass:"d-flex align-items-center"},[s("p",{staticClass:"primary hover-underline pointer",on:{click:t.openPaymentDialog}},[t._v(" Add payment ")])])]),s("div",{staticClass:"row"},[t._l(t.sale.payments,(function(e){return s("div",{key:e.id,staticClass:"col-12"},[s("div",{staticClass:"d-flex justify-content-between align-items-center"},[s("p",[t._v(" Paid on "+t._s(e.date)+" ")]),s("div",{staticClass:"d-flex align-items-center"},["supplier"==t.store.type?s("span",[t._v(" ¥ ")]):t._e(),s("p",[t._v(t._s(e.amount))]),"supplier"!==t.store.type?s("span",[t._v(" MMK ")]):t._e()])]),s("div",{staticClass:"b-divider"})])})),s("div",{staticClass:"col-12"},[s("div",{staticClass:"d-flex justify-content-between align-items-center"},[s("p",[t._v("Due amount")]),s("p",["supplier"==t.store.type?s("span",[t._v(" ¥ ")]):t._e(),t._v(" "+t._s(t.sale.due_amount)),"supplier"!==t.store.type?s("span",[t._v(" MMK ")]):t._e()])])])],2)])]),s("div",{staticClass:"col-lg-4 col-md-cu-4 mb-3"},[s("div",{staticClass:"box"},[s("label",{staticClass:"custom-label md-text",attrs:{for:""}},[t._v("Date of order")]),s("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd/MM/yyyy","value-format":"dd/MM/yyyy",placeholder:"Pick a date"},model:{value:t.sale.date,callback:function(e){t.$set(t.sale,"date",e)},expression:"sale.date"}}),"supplier"!==t.store.type?s("label",{staticClass:"custom-label mt-3 md-text",attrs:{for:""}},[t._v("Type")]):t._e(),"supplier"!==t.store.type?s("div",{staticClass:"flex-align-center"},[s("el-radio",{staticClass:"mr-3",attrs:{label:"In Stock"},model:{value:t.sale.type,callback:function(e){t.$set(t.sale,"type",e)},expression:"sale.type"}},[t._v("In Stock")]),s("el-radio",{attrs:{label:"Pre Order"},model:{value:t.sale.type,callback:function(e){t.$set(t.sale,"type",e)},expression:"sale.type"}},[t._v("Pre Order")])],1):t._e(),s("label",{staticClass:"custom-label mt-3 md-text",attrs:{for:""}},[t._v("Exported By")]),s("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"",disabled:"",placeholder:"Select"},model:{value:t.sale.exported_by,callback:function(e){t.$set(t.sale,"exported_by",e)},expression:"sale.exported_by"}}),s("label",{staticClass:"custom-label mt-3 md-text",attrs:{for:""}},[t._v("Delivery")]),s("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"","allow-create":"",placeholder:"Select or create new","remote-method":t.getDeliveries,loading:t.loadingDelivey},model:{value:t.sale.delivery_company_name,callback:function(e){t.$set(t.sale,"delivery_company_name",e)},expression:"sale.delivery_company_name"}},t._l(t.deliveries,(function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1),s("label",{staticClass:"custom-label mt-3 mb-0"},[t._v("Note")]),s("el-input",{attrs:{type:"textarea",placeholder:"Text such as facebook profile link, etc.",row:5},model:{value:t.sale.note,callback:function(e){t.$set(t.sale,"note",e)},expression:"sale.note"}})],1),"supplier"==t.store.type?s("div",{staticClass:"box mt-3"},[s("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Pricing Details")]),s("label",{staticClass:"custom-label"},[t._v("Exchange Rate")]),s("el-input",{staticClass:"w-100",model:{value:t.sale.money_price,callback:function(e){t.$set(t.sale,"money_price",e)},expression:"sale.money_price"}}),s("label",{staticClass:"custom-label mt-3"},[t._v("Service Fees(%)")]),s("el-input",{staticClass:"w-100",on:{change:t.calcTotal},model:{value:t.sale.supplier_percentage,callback:function(e){t.$set(t.sale,"supplier_percentage",e)},expression:"sale.supplier_percentage"}}),s("label",{staticClass:"custom-label mt-3 mb-0"},[t._v("Order Link")]),s("el-input",{attrs:{id:"orderLink"},model:{value:t.linkUrl,callback:function(e){t.linkUrl=e},expression:"linkUrl"}}),s("div",{staticClass:"flex-align-start mt-2"},[s("el-button",{staticClass:"flat mr-2",attrs:{type:"primary"},on:{click:t.copyURL}},[t._v("Copy")]),s("el-button",{staticClass:"ml-2",attrs:{type:"primary"},on:{click:t.openUrl}},[t._v("Open Link")])],1)],1):t._e(),s("div",{staticClass:"box mt-3 mb-3"},[s("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Customer")]),s("label",{staticClass:"custom-label md-text",attrs:{for:""}},[t._v("Name")]),s("el-select",{staticClass:"w-100 mb-3",attrs:{filterable:"","data-is-search":"true",remote:"","allow-create":"","reserve-keyword":"",placeholder:"Select or create new","remote-method":t.getCustomers,loading:t.loadingCustomer},on:{change:t.changeCustomer},model:{value:t.sale.customer_name,callback:function(e){t.$set(t.sale,"customer_name",e)},expression:"sale.customer_name"}},t._l(t.customers,(function(t){return s("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1),s("label",{staticClass:"custom-label md-text",attrs:{for:""}},[t._v("Phone")]),s("el-input",{staticClass:"w-100 mb-3",attrs:{placeholder:"Phone number"},model:{value:t.sale.phone,callback:function(e){t.$set(t.sale,"phone",e)},expression:"sale.phone"}}),s("label",{staticClass:"custom-label md-text",attrs:{for:""}},[t._v("State & city")]),s("el-cascader",{attrs:{options:t.options,value:"item"},on:{change:t.handleChangeAddress},model:{value:t.address,callback:function(e){t.address=e},expression:"address"}}),s("label",{staticClass:"mt-3 custom-label",attrs:{for:"Street address"}},[t._v("Street address")]),s("el-input",{staticClass:"w-100",attrs:{type:"textarea",row:5,name:"Street address",placeholder:"Street address"},model:{value:t.sale.address.address,callback:function(e){t.$set(t.sale.address,"address",e)},expression:"sale.address.address"}})],1)]),s("div",{staticClass:"col-12 lg-hide md-hide"},[s("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"mx-0 mb-3 w-100",attrs:{type:"primary",loading:t.showVoucher},on:{click:function(e){return t.changeActions("pdf")}}},[t._v(" Export Voucher ")]),t.startEditing&&!t.gettingSale?s("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"w-100 mx-0 mb-3",attrs:{disabled:!t.startEditing,loading:t.saving,type:"primary"},on:{click:t.Put}},[t._v(" Save ")]):t._e(),t.startEditing&&!t.gettingSale?s("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"flat w-100 mx-0 mb-3",attrs:{type:"primary"},on:{click:t.discardEditingSale}},[t._v(" Discard ")]):t._e()],1)])]),s("el-dialog",{staticClass:"default-dialog",attrs:{"show-close":!1,visible:t.openDiscount},on:{"update:visible":function(e){t.openDiscount=e}},scopedSlots:t._u([{key:"title",fn:function(){return[s("div",{staticClass:"d-flex align-items-center justify-content-between"},[s("h5",{staticClass:"my-0"},[t._v("Add discount")]),s("div",{staticClass:"d-flex align-items-center"})])]},proxy:!0},{key:"footer",fn:function(){return[s("div",{staticClass:"d-flex align-items-center justify-content-end"},[s("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"my-0 flat mr-0",attrs:{type:"primary"},on:{click:function(e){t.openDiscount=!1}}},[t._v(" Cancel ")]),s("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"my-0 mr-0",attrs:{type:"primary"},on:{click:t.calcDiscount}},[t._v(" Done ")])],1)]},proxy:!0}],null,!1,709193078)},[s("div",{staticClass:"con-content"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 pr-1"},[s("label",{staticClass:"pt-1 custom-label",attrs:{for:"discountType"}},[t._v("Discount type")]),s("el-select",{staticClass:"w-100",attrs:{name:"discountType"},model:{value:t.sale.discount_type,callback:function(e){t.$set(t.sale,"discount_type",e)},expression:"sale.discount_type"}},[s("el-option",{attrs:{label:"Amount",value:"$"}}),s("el-option",{attrs:{label:"Percentage",value:"%"}})],1)],1),s("div",{staticClass:"col-6 pl-1"},[s("label",{staticClass:"pt-1 custom-label",attrs:{for:"discountType"}},[t._v("Discount value")]),s("el-input",{staticClass:"w-100",attrs:{type:"number"},model:{value:t.discount,callback:function(e){t.discount=e},expression:"discount"}})],1),s("div",{staticClass:"col-12"},[s("label",{staticClass:"pt-1 custom-label",attrs:{for:"reason"}},[t._v("Reason")]),s("el-input",{staticClass:"w-100",attrs:{type:"textarea",row:3,name:"reason"},model:{value:t.sale.discount_reason,callback:function(e){t.$set(t.sale,"discount_reason",e)},expression:"sale.discount_reason"}})],1)])])]),s("el-dialog",{staticClass:"default-dialog",attrs:{"show-close":!1,visible:t.openPayment},on:{"update:visible":function(e){t.openPayment=e}},scopedSlots:t._u([{key:"title",fn:function(){return[s("div",{staticClass:"d-flex align-items-center justify-content-between"},[s("h5",{staticClass:"my-0"},[t._v("Make a payment")]),s("div",{staticClass:"d-flex align-items-center"})])]},proxy:!0},{key:"footer",fn:function(){return[s("div",{staticClass:"d-flex align-items-center justify-content-end"},[s("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(var(--primary),0.2)",expression:"'rgba(var(--primary),0.2)'",modifiers:{400:!0}}],staticClass:"my-0 flat mr-0",attrs:{type:"primary"},on:{click:function(e){t.openPayment=!1}}},[t._v(" Cancel ")]),s("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"my-0 mr-0",attrs:{type:"primary",loading:t.adding},on:{click:t.addPayment}},[t._v(" Done ")])],1)]},proxy:!0}],null,!1,2983156054)},[s("div",{staticClass:"con-content"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-6 pr-1"},[s("div",{staticClass:"w-100"},[s("label",{staticClass:"custom-label mt-1 md-text",attrs:{for:""}},[t._v("Date")]),s("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd/MM/yyyy","value-format":"dd/MM/yyyy",placeholder:"Pick a date"},model:{value:t.payment.date,callback:function(e){t.$set(t.payment,"date",e)},expression:"payment.date"}})],1)]),s("div",{staticClass:"col-6 pl-1"},[s("label",{staticClass:"custom-label mt-1 md-text",attrs:{for:""}},[t._v("Amount")]),s("el-input",{staticClass:"w-100",attrs:{label:"",placeholder:"0",type:"number"},model:{value:t.payment.amount,callback:function(e){t.$set(t.payment,"amount",e)},expression:"payment.amount"}})],1)])])]),s("el-dialog",{staticClass:"default-dialog",attrs:{"show-close":!1,visible:t.openFulfillDialog},on:{"update:visible":function(e){t.openFulfillDialog=e}},scopedSlots:t._u([{key:"title",fn:function(){return[s("div",{staticClass:"d-flex align-items-center justify-content-between"},[s("h5",{staticClass:"my-0"},[t._v("Fulfill items")]),s("div",{staticClass:"d-flex align-items-center"})])]},proxy:!0},{key:"footer",fn:function(){return[s("div",{staticClass:"d-flex align-items-center justify-content-end"},[s("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",value:"rgba(var(--primary),0.2)",expression:"'rgba(var(--primary),0.2)'",modifiers:{400:!0}}],staticClass:"my-0 flat mr-0",attrs:{type:"primary"},on:{click:t.cancelFulfill}},[t._v(" Cancel ")]),s("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"my-0 mr-0",attrs:{type:"primary",loading:t.addingFulfill},on:{click:t.addFulfill}},[t._v(" Done ")])],1)]},proxy:!0}],null,!1,4024162262)},[s("div",{staticClass:"con-content"},t._l(t.sale.products,(function(e,a){return s("div",{key:e.id,staticClass:"row"},[s("div",{staticClass:"col-8 flex-x-between"},[s("div",{staticClass:"flex-align-center"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.mediaUrl+e.image,expression:"mediaUrl + tr.image"}],staticClass:"simple-image list-image",attrs:{alt:""}}),s("p",[t._v(" "+t._s(e.name)+" ")])])]),s("div",{staticClass:"col-4 flex-align-center flex-end"},[s("el-input-number",{staticClass:"w-50",attrs:{type:"number",min:0,max:parseFloat(e.quantity),"controls-position":"right"},on:{change:function(e){return t.changeFulfill(a)}},model:{value:e.number_of_fullfilled,callback:function(s){t.$set(e,"number_of_fullfilled",s)},expression:"tr.number_of_fullfilled"}}),s("p",{staticClass:"ml-2"},[t._v("of "+t._s(e.quantity))])],1),a!==t.sale.products.length-1?s("div",{staticClass:"col-12"},[s("div",{staticClass:"b-divider"})]):t._e()])})),0)]),t.showVoucher?s("voucher",{attrs:{sale:t.sale}}):t._e()],1):t._e()},i=[],n=(s("99af"),s("4de4"),s("4160"),s("a15b"),s("d81d"),s("13d5"),s("a434"),s("b0c0"),s("b680"),s("ac1f"),s("5319"),s("1276"),s("9911"),s("159b"),s("5530")),l=s("2f62"),r=s("e9dd"),o=s("9c83"),c=s("d50a"),u=s("70b0"),d=s.n(u),p={data:function(){return{url:o["c"],options:r["a"],openCustomProduct:!1,mediaUrl:o["b"],openFulfillDialog:!1,addingFulfill:!1,openPayment:!1,payment:{amount:"0",date:"",sale_id:null},customProduct:{name:"",is_custom_product:!0,quantity:"1",price:"0",number_of_stock:1e5,image:"images/default.png",variation_product:null,product:null,subtotal:"0"},customers:[],deliveries:[],inventory:[],removed_ids:[],loadingProduct:!1,products:[],loadingCustomer:!1,loadingDelivey:!1,address:[],tax:5,discount:0,selectedProduct:"",openDiscount:!1,saving:!1,gettingSale:!1,sale:{payment_status:"Unpaid",supplier_percentage:"5",money_price:"300",customer_name:"",location_name:"",type:"Instock",exported_by:"",status:"Active",tax_rate:5,delivery_company_name:null,delivery_date:null,payment_method:null,location:1,payments:[],address:{state:"",city:"",address:"",map:""},products:[],timelines:[],subtotal:"",total:"0",discount:"0",discount_reason:"",discount_type:"$",is_same_address:!1,tax:"",note:"",tags:[]},selectedCustomer:{},loading:null,startEditing:!1,adding:!1,due_amount:0,query:"",voucher:{type:"pdf"},generating:!1,linkUrl:"",showVoucher:!1,productQuery:{}}},components:{file:c["c"],empty:c["b"],voucher:c["g"]},watch:{sale:{handler:function(){this.startEditing=!0},deep:!0},productQuery:function(t){this.sale.products.push({quantity:"1",sale_price:t.price,subtotal:t.price,name:t.name,image:t.image,primary_price:"0",primary_price_myanmar:t.cost_per_item,number_of_fullfilled:0,product_id:t.id})},locations:{handler:function(t){this.sale.location=t[0].id,this.sale.location_name=t[0].name},deep:!0}},mounted:function(){this.$store.commit("setIsReady",!1),this.filterSale()},beforeMount:function(){var t=this;window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("beforeunload",t.preventNav)})),document.addEventListener("scan",this.onScan),this.$once("hook:beforeDestroy",(function(){document.removeEventListener("scan",t.onScan)}))},beforeDestroy:function(){document.removeEventListener("scan",this.onScan)},beforeRouteLeave:function(t,e,s){document.removeEventListener("scan",this.onScan),this.startEditing?this.$smalltalk.confirm("Question","Do you really want to leave? you have unsaved changes!").then((function(){s()})).catch((function(){s(!1)})):s()},methods:{onScan:function(t){var e=this,s=t.detail;this.loadingProduct=!0,s.scanCode&&this.$axios.get("product/search/?query="+s.scanCode).then((function(t){if(e.loadingProduct=!1,t.data.length>0){var a=t.data[0],i=e.sale.products.filter((function(t){return t.product_id==a.id}));i.length>0?e.sale.products.map((function(t){t.product_id==a.id&&(t.quantity=t.quantity+1)})):e.sale.products.push({quantity:"1",sale_price:a.price,subtotal:a.price,name:a.name,image:a.image,primary_price:"0",primary_price_myanmar:a.cost_per_item,number_of_fullfilled:0,product_id:a.id})}else e.$noti.display({message:"No products found with "+s.scanCode,title:"",status:"success",color:"error"})})).catch((function(t){e.loadingProduct=!1,e.$noti.display({message:t,title:"",status:"error",color:"error"})}))},formatString:function(t){var e=t.split("_").join(" ");return e=e.split("(").pop().replace(")",""),e},preventNav:function(t){this.startEditing&&(t.preventDefault(),t.returnValue="")},openUrl:function(){window.open(this.linkUrl,"_blank").focus()},copyURL:function(){navigator.clipboard.writeText(this.linkUrl),this.isCopied=!0,this.$noti.display({color:"success",message:"Copied to clipboard!"})},handleChangeAddress:function(t){this.sale.address.state=t[0],this.sale.address.city=t[1]},openPaymentDialog:function(){this.payment.date=this.$moment().format("DD/MM/YYYY"),this.payment.amount=this.sale.due_amount,this.openPayment=!0},changeActions:function(t){"image"==t||"pdf"==t?(this.voucher.type=t,this.generate()):"Print"==t?window.print():"printCode"==t?this.printPdf():this.updateStatus(t)},updateStatus:function(t){var e=this;this.updatingStatus=!0,this.$axios.put("sales-status/",{status:t,ids:[this.sale.id]}).then((function(){e.sale.status=t,e.saleBeforeEdit=JSON.stringify(e.sale),setTimeout((function(){e.editingCustomer=!1,e.startEditing=!1,e.updatingStatus=!1}),10)})).catch((function(t){e.$noti.display({message:t,status:"error",color:"error"}),e.updatingStatus=!1}))},printPdf:function(){var t="",e=[];this.sale.products.forEach((function(t){if(t.link){var s=e.filter((function(e){return e.link==t.link}));0==s.length&&e.push(t)}})),e.forEach((function(e,s){t+="<tr>\n                          <td>".concat(s+1,"</td>\n                          <td>").concat(e.link,"</td>\n                          <td>").concat(e.created_at,"</td>\n                      </tr>")}));var s='\n                <!DOCTYPE html>\n                <html lang="en">\n                  <head>\n                    <meta charset="UTF-8" />\n                    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n                    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n                    <title>Order Codes</title>\n                    <style>\n                      table {\n                        font-family: arial, sans-serif;\n                        border-collapse: collapse;\n                        width: 100%;\n                        margin-bottom: 15px;\n                      }\n\n                      td,\n                      th {\n                        border: 1px solid #dddddd;\n                        text-align: left;\n                        padding: 8px;\n                      }\n                    </style>\n                  </head>\n                  <body>\n                    <table>\n                      <thead>\n                        <tr>\n                          <th style="width:50px;">No.</th>\n                          <th>Code</th>\n                          <th>Date</th>\n                        </tr>\n                      </thead>\n                      <tbody id="table-body">'.concat(t,"</tbody>\n                    </table>\n                  </body>\n                </html>\n"),a=window.open("","Print-Window");a.document.open(),a.document.write(s),a.window.print()},isFulfilled:function(t){return parseFloat(t.quantity)===parseFloat(t.number_of_fullfilled)},getProducts:function(t){var e=this;this.loadingProduct=!0,""!==t&&t||(t="Null"),this.$axios.get("product/search/?query="+t).then((function(t){e.loadingProduct=!1,e.products=t.data})).catch((function(t){e.loadingProduct=!1,e.$noti.display({message:t,title:"",status:"error",color:"error"})}))},changeFulfill:function(t){this.sale.products[t].is_fulfilled=parseFloat(this.sale.products[t].quantity)===parseFloat(this.sale.products[t].number_of_fullfilled)},addFulfill:function(){var t=this;this.addingFulfill=!0;var e=[],s=!0;this.sale.products.forEach((function(t){t.is_fulfilled=parseFloat(t.quantity)===parseFloat(t.number_of_fullfilled),e.push({is_fulfilled:t.is_fulfilled,number_of_fullfilled:t.number_of_fullfilled,id:t.id}),t.is_fulfilled||(s=t.is_fulfilled)})),this.sale.is_fulfilled=s,this.$axios.put("fulfill/",{data:e,sale_id:this.sale.id,is_fulfilled:s}).then((function(){t.addingFulfill=!1,t.openFulfillDialog=!1,t.saleProductsBeforeEdit=JSON.stringify(t.sale.products),t.$noti.display({title:"Success",color:"success",message:"Cool! Fulfillment has been successfully added."})})).catch((function(e){t.addingFulfill=!1,t.openFulfillDialog=!1,t.$noti.display({message:e,status:"error",color:"error"})}))},openFulfill:function(){this.saleProductsBeforeEdit=JSON.stringify(this.sale.products),this.openFulfillDialog=!0},cancelFulfill:function(){var t=this;this.sale.products=JSON.parse(this.saleProductsBeforeEdit),setTimeout((function(){t.startEditing=!1}),10),this.openFulfillDialog=!1},addPayment:function(){var t=this;this.adding=!0,this.payment.sale_id=this.sale.id,this.payment.payment_status=this.sale.payment_status,this.$axios.post("payment/",{data:this.payment}).then((function(e){t.sale.payments.push(e.data),t.calcDueAmount(),t.payment={sale_id:t.sale.id,amount:"",date:t.$moment().format("dd/MM/yyyy")},setTimeout((function(){t.Put()}),10)})).catch((function(e){t.openPayment=!1,t.adding=!1,t.$noti.display({message:e,status:"error",color:"error"})}))},filterSale:function(){var t=this;this.gettingSale=!0,this.$axios.get("sale/?sid="+this.$route.params.id).then((function(e){t.sale=e.data,t.linkUrl="https://osassist-orders.netlify.app/?sid=".concat(t.store.id,"&oid=").concat(e.data.id,"&date=").concat(e.data.date),t.saleBeforeEdit=JSON.stringify(t.sale);var s=!0;t.address=[e.data.address.state,e.data.address.city],t.sale.products.forEach((function(t){t.is_fulfilled=parseFloat(t.quantity)===parseFloat(t.number_of_fullfilled),t.is_fulfilled||(s=!1)})),t.sale.is_fulfilled=s,t.calcDueAmount(),setTimeout((function(){t.startEditing=!1,t.gettingSale=!1}),10),t.$store.commit("setIsReady",!0)})).catch((function(e){t.$noti.display({message:e,status:"error",color:"error"})})),this.calcDueAmount()},calcDueAmount:function(){var t=this;this.sale.due_amount=parseFloat(this.sale.total)-parseFloat(this.sale.payments.reduce((function(t,e){return t+parseFloat(e.amount)}),0)),0===parseFloat(this.sale.due_amount)?this.sale.payment_status="Paid":parseFloat(this.sale.due_amount)===parseFloat(this.sale.total)?this.sale.payment_status="Unpaid":this.sale.payment_status="Partially Paid",setTimeout((function(){t.startEditing=!1}),10)},setImage:function(t,e){t.length>0&&(this.sale.products[e].image=t[0].image)},addItem:function(){this.sale.products.push({quantity:"1",sale_price:"",subtotal:"",name:"",image:"/media/default.png",link:null,primary_price:null,primary_price_myanmar:null,number_of_fullfilled:0,product_id:""}),this.calcSubtotal()},removeProduct:function(t,e){this.sale.products.splice(t,1),this.removed_ids.push(e),this.calcSubtotal()},getCustomers:function(t){var e=this;this.loadingCustomer=!0,""!==t&&t||(t="Null"),this.$axios.get("search-customer/?query="+t).then((function(t){e.loadingCustomer=!1,e.customers=t.data})).catch((function(t){e.loadingCustomer=!1,e.$noti.display({message:t,title:"",status:"error",color:"error"})}))},getDeliveries:function(t){var e=this;this.loadingDelivery=!0,""!==t&&t||(t="Null"),this.$axios.get("search-delivery/?query="+t).then((function(t){e.loadingDelivery=!1,e.deliveries=t.data})).catch((function(t){e.loadingDelivery=!1,e.$noti.display({message:t,title:"",status:"error",color:"error"})}))},changeCustomer:function(){var t=this,e=this.customers.filter((function(e){return e.name==t.sale.customer_name}));e.length>0&&(this.selectedCustomer=e[0],this.sale.phone=this.selectedCustomer.phone,this.selectedCustomer.address&&(this.sale.address=this.selectedCustomer.address,this.address=[this.selectedCustomer.address.state,this.selectedCustomer.address.city]))},calcDiscount:function(){"%"===this.sale.discount_type?this.sale.discount=parseFloat(this.discount)/100*parseFloat(this.sale.subtotal):this.sale.discount=parseFloat(this.discount),this.openDiscount=!1,this.calcTotal()},calcTotal:function(){"supplier"===this.store.type?(this.sale.total=(parseFloat(this.sale.subtotal)+parseFloat(this.sale.subtotal)*(parseFloat(this.sale.supplier_percentage)/100)-parseFloat(this.sale.discount)).toFixed(0),this.calcProfitAmount()):this.sale.total=(parseFloat(this.sale.subtotal)-parseFloat(this.sale.discount)).toFixed(0)},calcSubtotal:function(){this.sale.subtotal=this.sale.products.reduce((function(t,e){return t+parseFloat(e.subtotal)}),0).toFixed(2),this.calcDiscount()},calcProfitAmount:function(){0!==parseInt(this.sale.purchase_amount)?this.sale.profit_amount=parseInt(parseFloat(this.sale.total)-parseFloat(this.sale.purchase_amount)).toFixed(0):this.sale.profit_amount=0},changeQuantity:function(t){this.sale.products[t].subtotal=(parseFloat(this.sale.products[t].sale_price)*parseFloat(this.sale.products[t].quantity)).toFixed(2),this.calcSubtotal()},calcPrice:function(t){this.sale.products[t].sale_price&&this.sale.products[t].primary_price_myanmar?(this.sale.products[t].profit=parseFloat(this.sale.products[t].sale_price-this.sale.products[t].primary_price_myanmar),this.sale.products[t].margin=(this.sale.products[t].profit/this.sale.products[t].sale_price*100).toFixed(2)):(this.sale.products[t].margin=null,this.sale.products[t].profit=null),this.changeQuantity(t)},calcAllProductPrice:function(){var t=this,e=[];this.sale.products.forEach((function(s,a){s.primary_price_myanmar=((parseFloat(s.primary_price)*(parseFloat(t.sale.supplier_percentage)/100)+parseFloat(s.primary_price))*t.sale.money_price).toFixed(0),t.calcPrice(a),e.push(s)}));var s=JSON.stringify(e);setTimeout((function(){t.sale.products=[],t.sale.products=JSON.parse(s)}),500)},changePrimaryPrice:function(t,e){var s=parseFloat(this.sale.supplier_percentage)/100;this.sale.products[e].primary_price_myanmar=parseFloat((parseFloat(t)*s+parseFloat(t))*this.sale.money_price);var a=JSON.stringify(this.sale.products);this.sale.products=[],this.sale.products=JSON.parse(a),this.calcPrice(e)},Put:function(){var t=this;this.saving=!0,this.sale.store=this.store.id,this.$axios.put("sale/",{data:this.sale,removed_ids:this.removed_ids}).then((function(e){t.sale=e.data,t.saleBeforeEdit=JSON.stringify(t.sale),t.removed_ids=[],t.sale.products.forEach((function(t){t.is_fulfilled=parseFloat(t.quantity)===parseFloat(t.number_of_fullfilled)})),t.calcDueAmount(),setTimeout((function(){t.startEditing=!1,t.adding=!1,t.saving=!1}),1),t.openPayment=!1,t.$noti.display({title:"Success",color:"success",message:"Cool! Sale has been successfully added."})})).catch((function(e){t.saving=!1,t.$noti.display({message:e,title:"",status:"error",color:"error"})}))},discardEditingSale:function(){var t=this;this.sale=JSON.parse(this.saleBeforeEdit),setTimeout((function(){t.startEditing=!1}),10)},generate:function(){var t=this;this.showVoucher=!0,setTimeout((function(){var e=document.querySelector(".invoice-body");d.a.toPng(e,{width:5*e.clientWidth,height:5*e.clientHeight,style:{transform:"scale(5)",transformOrigin:"top left"}}).then((function(e){var s=document.createElement("a");s.href=e,s.setAttribute("download",t.sale.customer_name+"-voucher.png"),document.body.appendChild(s),window.ReactNativeWebView&&window.ReactNativeWebView.postMessage&&window.ReactNativeWebView.postMessage(e),s.click(),t.showVoucher=!1})).catch((function(){t.showVoucher=!1}))}),500)},changeIsSame:function(){this.sale.is_same_address?this.sale.shipping_address=this.sale.address:this.sale.shipping_address={state:"",city:"",address:"",map:""}}},computed:Object(n["a"])({},Object(l["c"])(["isReady","store"]))},m=p,f=(s("549d"),s("2877")),h=Object(f["a"])(m,a,i,!1,null,null,null);e["default"]=h.exports},9911:function(t,e,s){"use strict";var a=s("23e7"),i=s("857a"),n=s("af03");a({target:"String",proto:!0,forced:n("link")},{link:function(t){return i(this,"a","href",t)}})},a15b:function(t,e,s){"use strict";var a=s("23e7"),i=s("44ad"),n=s("fc6a"),l=s("a640"),r=[].join,o=i!=Object,c=l("join",",");a({target:"Array",proto:!0,forced:o||!c},{join:function(t){return r.call(n(this),void 0===t?",":t)}})},af03:function(t,e,s){var a=s("d039");t.exports=function(t){return a((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},d028:function(t,e,s){}}]);
//# sourceMappingURL=chunk-1576fc7c.fe0105d7.js.map