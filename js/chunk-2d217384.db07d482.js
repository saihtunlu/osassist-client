(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d217384"],{c694:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 mt-3"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 flex-x-between mb-3"},[t("div",{staticClass:"flex-align-center"},[t("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"no-width my-0 flat",attrs:{type:"primary",circle:""},on:{click:function(t){return e.$router.go(-1)}}},[t("i",{staticClass:"bx bx-left-arrow-alt"})]),t("h5",{staticClass:"my-0 ml-2"},[e._v("Add Delivery")])],1),t("div",{staticClass:"flex-align-center flex-end"})]),t("div",{staticClass:"col-lg-8 col-md-cu-8 pr-lg-0"},[t("div",{staticClass:"box"},[t("div",{staticClass:"flex-x-between"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 mb-3"},[t("label",{staticClass:"custom-label",attrs:{for:"Media"}},[e._v("Media")]),t("file",{key:e.delivery.name,attrs:{initialData:e.delivery.image?[{image:e.delivery.image}]:[{}]},on:{completed:e.setImage}})],1),t("div",{staticClass:"col-12 mb-3"},[t("label",{staticClass:"custom-label",attrs:{for:"Name"}},[e._v("Order ID")]),t("el-input",{staticClass:"w-100",attrs:{name:"Name"},model:{value:e.delivery.order_id,callback:function(t){e.$set(e.delivery,"order_id",t)},expression:"delivery.order_id"}})],1),t("div",{staticClass:"col-12 mb-3"},[t("label",{staticClass:"custom-label md-text",attrs:{for:""}},[e._v("Delivery")]),t("el-select",{staticClass:"w-100",attrs:{filterable:"",remote:"","reserve-keyword":"","allow-create":"",placeholder:"Select or create new","remote-method":e.getDeliveries,loading:e.loadingDelivey},model:{value:e.delivery.delivery_name,callback:function(t){e.$set(e.delivery,"delivery_name",t)},expression:"delivery.delivery_name"}},e._l(e.deliveries,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1),t("div",{staticClass:"col-12"},[t("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"my-0 w-100",attrs:{disabled:!e.startEditing,loading:e.saving,type:"primary"},on:{click:e.Post}},[t("i",{staticClass:"bx bx-save mr-1"}),e._v("Save ")])],1)])])])])])])])},a=[],l=i("2f62"),r=i("9c83"),o=i("d50a"),d={data(){return{url:r["c"],mediaUrl:r["b"],loadingDelivey:!1,delivery:{delivery_name:"",order_id:"",image:"media/default.png"},saving:!1,startEditing:!1,deliveries:[]}},components:{file:o["c"]},watch:{delivery:{handler:function(){this.startEditing=!0},deep:!0}},mounted(){setTimeout(()=>{this.startEditing=!1},100),this.$store.commit("setIsReady",!0)},beforeMount(){window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",()=>{window.removeEventListener("beforeunload",this.preventNav)})},beforeRouteLeave(e,t,i){this.startEditing?this.$smalltalk.confirm("Question","Do you really want to leave? you have unsaved changes!").then(()=>{i()}).catch(()=>{i(!1)}):i()},methods:{getDeliveries(e){this.loadingDelivery=!0,""!==e&&e||(e="Null"),this.$axios.get("search-delivery/?query="+e).then(e=>{this.loadingDelivery=!1,this.deliveries=e.data}).catch(e=>{this.loadingDelivery=!1,this.$noti.display({message:e,title:"",status:"error",color:"error"})})},preventNav(e){this.startEditing&&(e.preventDefault(),e.returnValue="")},setImage(e){this.delivery.image=e[0].image},Post(){this.saving=!0,this.store=this.store.id,this.$axios.post("delivery-history/",{data:this.delivery}).then(()=>{this.startEditing=!1,this.saving=!1,this.$noti.display({title:"Success",color:"success",message:"Cool! Sale has been successfully added."}),this.delivery={delivery_name:"",order_id:"",image:"media/default.png"}}).catch(e=>{this.saving=!1,this.$noti.display({message:e,title:"",status:"error",color:"error"})})}},computed:{...Object(l["c"])(["isReady","store"])}},n=d,c=i("0c7c"),v=Object(c["a"])(n,s,a,!1,null,null,null);t["default"]=v.exports}}]);
//# sourceMappingURL=chunk-2d217384.db07d482.js.map