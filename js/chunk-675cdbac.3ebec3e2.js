(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-675cdbac"],{"0491":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"billing row"},[t.isReady?e("div",{staticClass:"col-12 mt-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 flex-x-between mb-3"},[e("div",{staticClass:"flex-align-center"},[e("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"no-width mr-2 flat",attrs:{circle:"",type:"primary"},on:{click:function(e){return t.$router.go(-1)}}},[e("i",{staticClass:"bx bx-left-arrow-alt"})]),e("h5",{staticClass:"my-0 mx-2"},[t._v("Billing")]),e("el-tag",{staticClass:"rounded mr-2",attrs:{type:"primary"}},[t._v(t._s(t.billing.date))]),e("el-tag",{staticClass:"rounded mr-2",attrs:{type:"primary"}},[t._v(t._s(t.billing.status))]),"Paid"==t.billing.payment_status?e("el-tag",{staticClass:"rounded mr-2",attrs:{type:"success"}},[t._v(t._s(t.billing.payment_status))]):t._e(),"Unpaid"==t.billing.payment_status?e("el-tag",{staticClass:"rounded mr-2",attrs:{type:"danger"}},[t._v(t._s(t.billing.payment_status))]):t._e(),"Partially Paid"==t.billing.payment_status?e("el-tag",{staticClass:"rounded mr-2",attrs:{type:"warning"}},[t._v(t._s(t.billing.payment_status))]):t._e()],1),e("div",{staticClass:"flex-align-center"})]),e("div",{staticClass:"col-lg-8"},[e("div",{staticClass:"box"},[e("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Details")]),e("div",{staticClass:"flex-x-between w-100"},[e("p",[t._v("Plan :")]),e("p",[t._v(" "+t._s(t.billing.selected_plan.name)+" ")])]),e("div",{staticClass:"b-divider my-3"}),e("div",{staticClass:"flex-x-between w-100"},[e("p",[t._v("Number of months :")]),e("p",[t._v(" "+t._s(t.billing.number_of_months)+" ")])]),e("div",{staticClass:"b-divider my-3"}),e("div",{staticClass:"flex-x-between w-100"},[e("p",[t._v("Price per month :")]),e("p",[t._v(t._s(t.billing.price)+"MMK")])]),e("div",{staticClass:"b-divider my-3"}),e("div",{staticClass:"flex-x-between w-100"},[e("p",[t._v("Total :")]),e("p",[t._v(t._s(t.billing.total)+"MMK")])]),e("div",{staticClass:"b-divider my-3"}),e("div",{staticClass:"flex-x-between w-100"},[e("p",[t._v("Payment status :")]),e("p",[t._v(t._s(t.billing.payment_status))])])]),e("div",{staticClass:"box mt-3"},[e("div",{staticClass:"flex-x-between"},[e("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Payment history")]),"Paid"!==t.billing.payment_status?e("p",{staticClass:"mt-0 mb-2 primary hover-underline pointer",on:{click:function(e){t.openPayment=!0}}},[t._v(" Add payment ")]):t._e()]),t._l(t.billing.payments,(function(a,s){return e("div",{key:s,staticClass:"w-100"},[e("p",{staticClass:"my-2"},[t._v(" Paid "+t._s(a.amount)+"MMK on "+t._s(a.date)+" "),a.payment_method?e("span",[t._v(" via "+t._s(a.payment_method.name)+" ("+t._s(a.payment_method.payment_number)+")")]):t._e(),t._v(". ")]),e("div",{staticClass:"media-box"},[e("label",{staticClass:"custom-label",attrs:{for:""}},[t._v("Screenshots")]),e("div",{staticClass:"image-list"},t._l(a.images,(function(a,i){return e("div",{key:a.image,staticClass:"pointer light-box-img"},[e("img",{attrs:{src:t.mediaUrl+a.image,alt:""},on:{click:function(e){t.index=i,t.activePaymentIndex=s}}})])})),0)]),s!==t.billing.payments.length-1?e("div",{staticClass:"b-divider"}):t._e()])}))],2)]),e("div",{staticClass:"col-lg-4 pl-lg-0 mt-3 mt-lg-0"},[e("div",{staticClass:"mb-3 box"},[e("label",{staticClass:"custom-label mt-2 mb-0"},[t._v("Note")]),e("p",[t._v(t._s(t.billing.note))])])])])]):t._e(),t.billing.payments[0]&&t.billing.payments[0].images.length>0?e("CoolLightBox",{attrs:{items:t.imagesListGenerator(t.billing.payments[t.activePaymentIndex].images),useZoomBar:!0,index:t.index},on:{close:function(e){t.index=null}}}):t._e(),e("el-dialog",{staticClass:"default-dialog",attrs:{"show-close":!1,width:"700px !important",visible:t.openPayment},on:{"update:visible":function(e){t.openPayment=e}},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"d-flex align-items-center justify-content-between"},[e("h5",{staticClass:"my-0"},[t._v("Make a payment")]),e("div",{staticClass:"d-flex align-items-center"})])]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"d-flex align-items-center justify-content-end"},[e("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"my-0 flat mr-0",attrs:{type:"dark"},on:{click:function(e){t.openPayment=!1}}},[t._v(" Cancel ")]),e("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"my-0 mr-0",attrs:{type:"primary",loading:t.adding,disabled:t.disabledAddPayment},on:{click:t.addPayment}},[t._v(" Done ")])],1)]},proxy:!0}])},[e("div",{staticClass:"con-content"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12"},[e("div",{staticClass:"row px-2"},t._l(t.paymentMethods,(function(a){return e("div",{key:a.id,staticClass:"col-4 px-2"},[e("div",{staticClass:"payment-box pointer",class:a.name==t.payment.payment_method.name&&"active",on:{click:function(e){t.payment.payment_method=a}}},[e("p",{staticClass:"mb-3 font-weight-bold"},[t._v(t._s(a.name))]),e("p",[t._v(t._s(a.payment_number))])])])})),0)]),e("div",{staticClass:"col-12 mb-3"},[e("label",{staticClass:"custom-label mt-1 md-text",attrs:{for:""}},[t._v("Screenshots")]),e("file",{attrs:{multiple:!0},on:{completed:t.setImages}})],1),e("div",{staticClass:"col-6 pr-1"},[e("div",{staticClass:"w-100"},[e("label",{staticClass:"custom-label md-text",attrs:{for:""}},[t._v("Date")]),e("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd/MM/yyyy","value-format":"dd/MM/yyyy",placeholder:"Pick a date"},model:{value:t.payment.date,callback:function(e){t.$set(t.payment,"date",e)},expression:"payment.date"}})],1)]),e("div",{staticClass:"col-6 pl-1"},[e("label",{staticClass:"custom-label",attrs:{for:"Amount"}},[t._v("Amount")]),e("el-input",{staticClass:"w-100",attrs:{name:"Amount",type:"number"},model:{value:t.payment.amount,callback:function(e){t.$set(t.payment,"amount",e)},expression:"payment.amount"}})],1)])])])],1)},i=[],n=(a("14d9"),a("13d5"),a("2f62")),l=a("9c83"),o=a("d50a"),d={data(){return{adding:!1,url:l["c"],index:null,activePaymentIndex:0,openPayment:!1,mediaUrl:l["b"],paymentMethods:[],saving:!1,payment:{images:[],payment_method:{name:""},date:null,amount:0},startEditing:!1,billing:{store:null,selected_plan:null,payments:[{images:[],date:null,amount:0}],payment_method:null,subtotal:null,total:null,status:"Pending",payment_status:"Unpaid",number_of_months:null},selectedPackage:null,disabledAddPayment:!0}},watch:{selectedPackage:{handler:function(t){this.billing.price=t.price,this.billing.number_of_months=t.monthQuantity,this.billing.total=t.price*t.monthQuantity},deep:!0},payment:{handler:function(t){""==t.payment_method.name||0==t.amount?this.disabledAddPayment=!0:this.disabledAddPayment=!1},deep:!0}},created(){this.$route.query.bid||this.$router.push({name:"Billings"}),this.payment.date=this.$moment().format("DD/MM/YYYY"),this.$store.commit("setIsReady",!1),this.getPaymentMethods(),this.getBilling(this.$route.query.bid)},mounted(){},computed:{...Object(n["c"])(["isReady"]),...Object(n["b"])(["checkIsReady"])},components:{file:o["c"]},methods:{getPaymentMethods(){this.$axios.get("payment-methods/").then(t=>{this.paymentMethods=t.data}).catch(t=>{this.$noti.display({message:t,status:"error",color:"error"})})},addPayment(){this.adding=!0,this.billing.payments.push(this.payment),this.checkPayment(),this.$axios.post("billing-payment/",{bid:this.billing.id,payment_status:this.billing.payment_status,payment:this.payment}).then(()=>{this.adding=!1,this.openPayment=!1}).catch(t=>{this.$noti.display({message:t,status:"error",color:"error"}),this.adding=!1,this.openPayment=!1})},checkPayment(){var t=this.billing.payments.reduce((t,e)=>t+parseInt(e.amount),0);t==this.billing.total||t>this.billing.total?this.billing.payment_status="Paid":t<this.billing.total?this.billing.payment_status="Partially Paid":0==t&&(this.billing.payment_status="Unpaid")},setImages(t){this.payment.images=t},getBilling(t){this.$axios.get("billing/?bid="+t).then(t=>{this.billing=t.data,this.$store.commit("setIsReady",!0)}).catch(t=>{this.$noti.display({message:t,status:"error",color:"error"})})},imagesListGenerator(t){var e=[];return t.forEach(t=>{e.push(this.mediaUrl+t.image)}),e}}},r=d,m=(a("4ca3"),a("0c7c")),c=Object(m["a"])(r,s,i,!1,null,null,null);e["default"]=c.exports},"13d5":function(t,e,a){"use strict";var s=a("23e7"),i=a("d58f").left,n=a("a640"),l=a("2d00"),o=a("605d"),d=!o&&l>79&&l<83,r=d||!n("reduce");s({target:"Array",proto:!0,forced:r},{reduce:function(t){var e=arguments.length;return i(this,t,e,e>1?arguments[1]:void 0)}})},"4ca3":function(t,e,a){"use strict";a("d38a")},"605d":function(t,e,a){(function(e){var s=a("c6b6");t.exports="undefined"!=typeof e&&"process"==s(e)}).call(this,a("4362"))},a640:function(t,e,a){"use strict";var s=a("d039");t.exports=function(t,e){var a=[][t];return!!a&&s((function(){a.call(null,e||function(){return 1},1)}))}},d38a:function(t,e,a){},d58f:function(t,e,a){var s=a("59ed"),i=a("7b0b"),n=a("44ad"),l=a("07fa"),o=TypeError,d=function(t){return function(e,a,d,r){s(a);var m=i(e),c=n(m),p=l(m),u=t?p-1:0,y=t?-1:1;if(d<2)while(1){if(u in c){r=c[u],u+=y;break}if(u+=y,t?u<0:p<=u)throw o("Reduce of empty array with no initial value")}for(;t?u>=0:p>u;u+=y)u in c&&(r=a(r,c[u],u,m));return r}};t.exports={left:d(!1),right:d(!0)}}}]);
//# sourceMappingURL=chunk-675cdbac.3ebec3e2.js.map