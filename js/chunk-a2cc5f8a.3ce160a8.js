(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2cc5f8a"],{3690:function(t,e,s){"use strict";s("ce65")},bfb3:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"billing row"},[t.isReady?e("div",{staticClass:"col-12 mt-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 flex-x-between mb-3"},[e("div",{staticClass:"flex-align-center"},[e("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"no-width flat",attrs:{type:"primary",circle:""},on:{click:function(e){return t.$router.go(-1)}}},[e("i",{staticClass:"bx bx-left-arrow-alt"})]),e("h5",{staticClass:"my-0 ml-2"},[t._v("Billing")])],1)]),e("div",{staticClass:"col-lg-8"},[e("div",{staticClass:"box"},[e("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Billing cycle")]),e("div",{staticClass:"row package-box mx-0 mt-3"},t._l(t.packages,(function(s,a){return e("div",{key:s.name,staticClass:"col-12 package"},[e("el-radio",{attrs:{label:s},model:{value:t.selectedPackage,callback:function(e){t.selectedPackage=e},expression:"selectedPackage"}},[e("div",{staticClass:"w-100 flex-x-between"},[e("div",[e("span",{staticClass:"font-weight-bold mr-3"},[t._v(t._s(s.name))]),e("span",{staticClass:"gray"},[t._v("("+t._s(s.price)+"MMK "),1==s.monthQuantity?e("span",[t._v("in every month")]):e("span",[t._v(" x "+t._s(s.monthQuantity)+" months")]),t._v(")")])]),1!==s.monthQuantity?e("p",{staticClass:"primary"},[t._v(" Save "+t._s(s.save)+"MMK ")]):t._e()])]),a!==t.packages.length-1?e("div",{staticClass:"b-divider"}):t._e()],1)})),0)]),e("div",{staticClass:"box mt-3"},[e("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Payment methods")]),e("div",{staticClass:"row package-box mx-0 mt-3"},t._l(t.paymentMethods,(function(s,a){return e("div",{key:s.name,staticClass:"col-12 package"},[e("el-radio",{attrs:{label:s},model:{value:t.billing.payments[0].payment_method,callback:function(e){t.$set(t.billing.payments[0],"payment_method",e)},expression:"billing.payments[0].payment_method"}},[e("div",{staticClass:"w-100 flex-x-between"},[e("div",[e("span",{staticClass:"font-weight-bold mr-3"},[t._v(t._s(s.name))]),e("br"),e("span",{staticClass:"gray"},[t._v("Account number : "+t._s(s.payment_number))])])])]),a!==t.paymentMethods.length-1?e("div",{staticClass:"b-divider"}):t._e()],1)})),0)]),e("div",{staticClass:"box mt-3"},[e("div",{staticClass:"flex-align-center"},[e("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Payment")]),e("span",{staticClass:"gray mb-2"},[t._v("("+t._s(t.billing.payment_status)+")")])]),e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 mb-3"},[e("label",{staticClass:"custom-label mt-1 md-text",attrs:{for:""}},[t._v("Screenshots")]),e("file",{attrs:{multiple:!0},on:{completed:t.setImages}})],1),e("div",{staticClass:"col-6"},[e("label",{staticClass:"custom-label md-text",attrs:{for:""}},[t._v("Date")]),e("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd/MM/yyyy","value-format":"dd/MM/yyyy",placeholder:"Pick a date"},model:{value:t.billing.payments[0].date,callback:function(e){t.$set(t.billing.payments[0],"date",e)},expression:"billing.payments[0].date"}})],1),e("div",{staticClass:"col-6"},[e("label",{staticClass:"custom-label",attrs:{for:"Amount"}},[t._v("Amount")]),e("el-input",{staticClass:"w-100",attrs:{name:"Amount",type:"number"},on:{change:t.checkPayment},model:{value:t.billing.payments[0].amount,callback:function(e){t.$set(t.billing.payments[0],"amount",e)},expression:"billing.payments[0].amount"}})],1)])])]),e("div",{staticClass:"col-lg-4 pl-lg-0 mt-3 mt-lg-0"},[e("div",{staticClass:"mb-3 box"},[e("label",{staticClass:"custom-label mt-2 mb-0"},[t._v("Note")]),e("el-input",{attrs:{type:"textarea",row:3},model:{value:t.billing.note,callback:function(e){t.$set(t.billing,"note",e)},expression:"billing.note"}})],1),e("div",{staticClass:"box"},[e("h5",{staticClass:"my-0"},[t._v(t._s(t.billing.selected_plan.name)+" Plan")]),e("div",{staticClass:"b-divider mb-0"}),e("el-collapse",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[e("el-collapse-item",{staticClass:"plan-features",attrs:{title:"PLAN DETAILS",name:"1"}},t._l(JSON.parse(t.billing.selected_plan.features),(function(s){return e("p",{key:s},[t._v(" "+t._s(s)+" ")])})),0)],1),e("div",{staticClass:"b-divider mt-0"}),e("div",{staticClass:"flex-x-between"},[e("p",{staticClass:"text-bold"},[t._v("Total:")]),e("p",{},[t._v(t._s(t.billing.total)+"MMK")])]),e("el-button",{staticClass:"w-100 mx-0 mb-0 mt-3",attrs:{type:"primary",disabled:0==t.billing.payments[0].amount||0==t.billing.number_of_months,loading:t.saving},on:{click:t.Post}},[t._v("Submit")])],1)])])]):t._e()])},i=[],l=(s("14d9"),s("2f62")),n=s("9c83"),o=s("d50a"),c={data(){return{url:n["c"],saving:!1,active:"1",startEditing:!1,paymentMethods:[],billing:{store:null,selected_plan:null,payments:[{images:[],date:null,amount:0}],payment_method:null,subtotal:null,total:null,status:"Pending",payment_status:"Unpaid",number_of_months:null},packages:[{name:"Monthly",monthQuantity:1,price:0,save:0},{name:"3 Months",monthQuantity:3,price:0,save:0},{name:"6 Months",monthQuantity:6,price:0,save:0},{name:"Yearly",monthQuantity:12,price:0,save:0},{name:"2 Years",monthQuantity:24,price:0,save:0},{name:"3 Years",monthQuantity:36,price:0,save:0}],selectedPackage:null}},components:{file:o["c"]},watch:{selectedPackage:{handler:function(t){this.billing.price=t.price,this.billing.number_of_months=t.monthQuantity,this.billing.total=t.price*t.monthQuantity},deep:!0},store(){this.billing.store=this.store}},created(){this.$route.query.pid||this.$router.push({name:"Plan"}),this.$store.commit("setIsReady",!1),this.billing.date=this.$moment().format("DD/MM/YYYY"),this.billing.payments[0].date=this.$moment().format("DD/MM/YYYY"),this.getPaymentMethods(),this.billing.store=this.store,this.getPlan(this.$route.query.pid)},mounted(){},computed:{...Object(l["c"])(["store","isReady"]),...Object(l["b"])(["checkIsReady"])},beforeMount(){window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",()=>{window.removeEventListener("beforeunload",this.preventNav)})},beforeRouteLeave(t,e,s){this.startEditing?this.$smalltalk.confirm("Question","Do you really want to leave? you have unsaved changes!").then(()=>{s()}).catch(()=>{s(!1)}):s()},methods:{preventNav(t){this.startEditing&&(t.preventDefault(),t.returnValue="")},checkPayment(){this.billing.payments[0].amount==this.billing.total||this.billing.payments[0].amount>this.billing.total?this.billing.payment_status="Paid":this.billing.payments[0].amount<this.billing.total?this.billing.payment_status="Partially Paid":0==this.billing.payments[0].amount&&(this.billing.payment_status="Unpaid")},setImages(t){var e=[];t.forEach(t=>{e.push({image:t.image})}),this.billing.payments[0].images=e},getPlan(t){this.$axios.get("membership/?pid="+t).then(t=>{this.billing.selected_plan=t.data,this.packages.forEach((t,e)=>{t.price=this.billing.selected_plan.price-this.billing.selected_plan.price*(.1*e),t.save=this.billing.selected_plan.price*t.monthQuantity-t.price*t.monthQuantity}),this.$store.commit("setIsReady",!0)}).catch(t=>{this.$noti.display({message:t,status:"error",color:"error"})})},getPaymentMethods(){this.$axios.get("payment-methods/").then(t=>{this.paymentMethods=t.data}).catch(t=>{this.$noti.display({message:t,status:"error",color:"error"})})},Post(){this.saving=!0,this.$axios.post("billing/",{data:this.billing}).then(()=>{this.saving=!1,this.$noti.display({color:"success",title:"Success",message:"Cool! Billing has been successfully submitted. Please wait for approving."}),this.$router.push({name:"Billing History"})}).catch(t=>{this.saving=!1,this.$noti.display({message:t,status:"error",color:"error"})})}}},m=c,r=(s("3690"),s("0c7c")),d=Object(r["a"])(m,a,i,!1,null,null,null);e["default"]=d.exports},ce65:function(t,e,s){}}]);
//# sourceMappingURL=chunk-a2cc5f8a.3ce160a8.js.map