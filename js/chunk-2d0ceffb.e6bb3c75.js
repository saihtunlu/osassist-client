(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ceffb"],{"629b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isReady?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 flex-x-between mt-3"},[a("div",{staticClass:"flex-align-center"},[a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"no-width flat",attrs:{type:"primary",circle:""},on:{click:function(t){return e.$router.go(-1)}}},[a("i",{staticClass:"bx bx-left-arrow-alt"})]),a("h5",{staticClass:"my-0 ml-2"},[e._v("Media library")])],1),a("div",{staticClass:"flex-align-center flex-end"},[a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],attrs:{loading:e.saving,type:"primary"},on:{click:e.Post}},[a("i",{staticClass:"bx bx-save mr-1"}),e._v(" Save ")])],1)]),a("div",{staticClass:"col-12 mt-3"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box pb-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 flex-x-between"},[a("div",{staticClass:"flex-align-center"},[a("p",{staticClass:"mx-0 table-tab",class:"setting"===e.activeName&&"active-table-tab",on:{click:function(t){e.activeName="setting"}}},[e._v(" Setting ")])])]),e._m(0),a("div",{staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mt-2 mb-3"},[a("el-alert",{attrs:{title:"Warning!",closable:!1,type:"error"}},[a("p",[e._v(" Please do not change anything without the help of developer."),a("br"),e._v(" You can read more about Cloudinary "),a("a",{attrs:{href:"https://cloudinary.com/",target:"_blank"}},[e._v("here")]),e._v(". ")])])],1),a("div",{staticClass:"col-lg-6"},[a("label",{staticClass:"custom-label"},[e._v("Cloud name")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:""},model:{value:e.media_key.cloud_name,callback:function(t){e.$set(e.media_key,"cloud_name",t)},expression:"media_key.cloud_name"}}),a("label",{staticClass:"custom-label"},[e._v("API Key")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:""},model:{value:e.media_key.api_key,callback:function(t){e.$set(e.media_key,"api_key",t)},expression:"media_key.api_key"}})],1),a("div",{staticClass:"col-lg-6"},[a("label",{staticClass:"custom-label"},[e._v("Upload presets")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:""},model:{value:e.media_key.upload_preset,callback:function(t){e.$set(e.media_key,"upload_preset",t)},expression:"media_key.upload_preset"}})],1)])])])])])]):e._e()},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12"},[a("div",{staticClass:"b-divider mb-1 mt-0"})])}],l=(a("4de4"),a("4160"),a("d3b7"),a("159b"),a("96cf"),a("1da1")),n=a("5530"),o=a("2f62"),r=a("9c83"),c={data:function(){return{storeData:{cloud_name:"",api_key:"",upload_preset:""},mediaUrl:r["b"],appUrl:r["a"],activeName:"media",selected:[],loading:!1,active:!1,index:null,lightBoxFiles:[],saving:!1,media_key:{cloud_name:"",api_key:"",upload_preset:""}}},computed:Object(n["a"])({},Object(o["c"])(["files","isReady","store"])),watch:{file:function(e){var t=this;e&&(this.file.forEach((function(e){e.isSelected=!1,t.lightBoxFiles.push(t.mediaUrl+e.image)})),this.$store.commit("setIsReady",!0))},store:function(e){this.media_key=JSON.parse(e.fbLink)}},mounted:function(){var e=this;this.$store.commit("setIsReady",!1),this.store&&(this.media_key=JSON.parse(this.store.fbLink)),this.$store.commit("setIsReady",!0),this.files&&this.files.forEach((function(t){t.isSelected=!1,e.lightBoxFiles.push(e.mediaUrl+t.image)}))},methods:{changeSelect:function(){this.selected=this.files.filter((function(e){return e.isSelected}))},Post:function(){var e=this;this.$smalltalk.confirm("Question","Are you sure you want to update cloudinary detail?").then((function(){e.saving=!0;var t=e.store;t.fbLink=JSON.stringify(e.media_key),e.$axios.put("store/",{data:t}).then((function(t){e.$store.commit("setStore",t.data),e.saving=!1,e.$noti.display({color:"success",title:"Success",message:"Cool! Store has been successfully updated."})}))}))},setHeight:function(e){e.path[0].style.height=e.path[0].clientWidth+"px"},onFileChange:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var i,s,l,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(/\.(jpg|jpeg|png|JPG|PNG)$/.test(e.target.value)){a.next=3;break}return alert("The file uploaded need to be -jpeg,jpg,png"),a.abrupt("return",!1);case 3:if(!(e.target.files[0].size/1e6>1)){a.next=6;break}return alert("Max image file size is 1MB!"),a.abrupt("return",!1);case 6:return t.loading=!0,i=e.target.files[0],s=new FormData,s.append("file",i),s.append("upload_preset",t.media_key.upload_preset),s.append("api_key",t.media_key.api_key),s.append("timestamp",Date.now()/1e3|0),a.next=15,fetch("https://api.cloudinary.com/v1_1/".concat(t.media_key.cloud_name,"/image/upload"),{method:"POST",body:s});case 15:return l=a.sent,a.next=18,l.json();case 18:n=a.sent,t.uploadImageToServer({image:n.secure_url});case 20:case"end":return a.stop()}}),a)})))()},uploadImageToServer:function(e){var t=this;this.$axios.post("files/",{data:e}).then((function(){t.$store.commit("addFile",[e]),t.activeName="media",t.loading=!1})).catch((function(e){t.loading=!1,t.$noti.display({message:e,status:"error",color:"error"})}))},removeFiles:function(){var e=this;if(this.selected.length>0){this.loading=!0;var t=[];this.selected.forEach((function(e){t.push(e.id)})),this.$axios.post("remove-files/",{data:t}).then((function(){e.$store.commit("removeFile",t),e.selected=[],e.loading=!1,e.$noti.display({message:"Cool! File has been successfully deleted.",title:"success",color:"success"})})).catch((function(t){e.$noti.display({message:t,status:"error",color:"error"}),e.loading=!1}))}}}},d=c,u=a("2877"),m=Object(u["a"])(d,i,s,!1,null,"3a05d012",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0ceffb.e6bb3c75.js.map