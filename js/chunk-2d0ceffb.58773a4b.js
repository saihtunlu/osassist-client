(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ceffb"],{"629b":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isReady?a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 flex-x-between mt-3"},[a("div",{staticClass:"flex-align-center"},[a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"no-width flat",attrs:{type:"primary",circle:""},on:{click:function(t){return e.$router.go(-1)}}},[a("i",{staticClass:"bx bx-left-arrow-alt"})]),a("h5",{staticClass:"my-0 ml-2"},[e._v("Media library")])],1),a("div",{staticClass:"flex-align-center flex-end"},["setting"==e.activeName?a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],attrs:{loading:e.saving,type:"primary"},on:{click:e.Post}},[a("i",{staticClass:"bx bx-save mr-1"}),e._v(" Save ")]):e._e()],1)]),a("div",{staticClass:"col-12 mt-3"},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"box pb-0"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 flex-x-between"},[a("div",{staticClass:"flex-align-center"},[a("p",{staticClass:"mx-0 table-tab",class:"media"===e.activeName&&"active-table-tab",on:{click:function(t){e.activeName="media"}}},[e._v(" All media ")]),a("p",{staticClass:"mx-0 table-tab",class:"upload"===e.activeName&&"active-table-tab",on:{click:function(t){e.activeName="upload"}}},[e._v(" Upload ")]),a("p",{staticClass:"mx-0 table-tab",class:"setting"===e.activeName&&"active-table-tab",on:{click:function(t){e.activeName="setting"}}},[e._v(" Setting ")])]),e.selected.length>0&&"media"==e.activeName?a("p",{staticClass:"danger hover-underline",on:{click:e.removeFiles}},[a("i",{staticClass:"bx bx-x mr-1"}),e._v(" Delete ")]):e._e()]),e._m(0),a("div",{directives:[{name:"show",rawName:"v-show",value:"media"==e.activeName,expression:"activeName == 'media'"}],staticClass:"col-12"},[e.file.length>0?a("div",{staticClass:"row px-3"},e._l(e.file,(function(t,i){return a("div",{key:t.image,staticClass:"col-2 px-1 mb-3 light-box-img image-box"},[a("i",{staticClass:"bx bx-expand-alt pointer",on:{click:function(t){e.index=i,e.active=!0}}}),a("div",{staticClass:"image-check animated fadeIn",style:"animation-delay:"+45*(i+1)+"ms;animation-duration:0.8s;",on:{click:function(a){t.isSelected=!t.isSelected,e.changeSelect(t)}}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.mediaUrl+t.image,expression:"mediaUrl + data.image"}],class:t.isSelected&&"selected",staticStyle:{width:"100% !important"},on:{load:e.setHeight}})])])})),0):a("div",{staticClass:"d-flex align-items-center justify-content-center",staticStyle:{height:"65vh"}},[a("div",{staticClass:"d-flex flex-column align-items-center"},[a("el-empty",{attrs:{description:"No data found!"}})],1)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"upload"==e.activeName,expression:"activeName == 'upload'"}],staticClass:"col-12"},[a("div",{staticClass:"row px-3"},[a("div",{staticClass:"col-12 d-flex justify-content-center align-items-center",staticStyle:{height:"65vh"}},[a("div",{staticClass:"\n                  file-uploader\n                  d-flex\n                  justify-content-center\n                  align-items-center\n                ",staticStyle:{width:"70%"}},[a("input",{ref:"fileInput",staticClass:"uploader-file-input pointer",attrs:{type:"file",name:""},on:{change:e.onFileChange}}),a("div",{staticClass:"\n                    flex-column\n                    d-flex\n                    justify-content-center\n                    align-items-center\n                  "},[a("p",{staticClass:"gray mb-2"},[e._v("Drag images here to upload Or")]),a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],attrs:{type:"primary"},on:{click:function(t){return e.$refs.fileInput.click()}}},[e._v("Add images")])],1)])])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:"setting"==e.activeName,expression:"activeName == 'setting'"}],staticClass:"col-12"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mt-2 mb-3"},[a("el-alert",{attrs:{title:"Warning!",closable:!1,type:"error"}},[a("p",[e._v(" Please do not change anything without the help of developer."),a("br"),e._v(" You can read more about Cloudinary "),a("a",{attrs:{href:"https://cloudinary.com/",target:"_blank"}},[e._v("here")]),e._v(". ")])])],1),a("div",{staticClass:"col-lg-6"},[a("label",{staticClass:"custom-label"},[e._v("Cloud name")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:""},model:{value:e.storeData.cloud_name,callback:function(t){e.$set(e.storeData,"cloud_name",t)},expression:"storeData.cloud_name"}}),a("label",{staticClass:"custom-label"},[e._v("API Key")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:""},model:{value:e.storeData.api_key,callback:function(t){e.$set(e.storeData,"api_key",t)},expression:"storeData.api_key"}})],1),a("div",{staticClass:"col-lg-6"},[a("label",{staticClass:"custom-label"},[e._v("Upload presets")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:""},model:{value:e.storeData.upload_preset,callback:function(t){e.$set(e.storeData,"upload_preset",t)},expression:"storeData.upload_preset"}})],1)])])])])]),a("CoolLightBox",{attrs:{items:e.lightBoxFiles,useZoomBar:!0,index:e.index},on:{close:function(t){e.index=null}}})],1):e._e()},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12"},[a("div",{staticClass:"b-divider mb-1 mt-0"})])}],l=(a("4de4"),a("4160"),a("d3b7"),a("159b"),a("96cf"),a("1da1")),n=a("5530"),o=a("2f62"),c=a("9c83"),r={data:function(){return{storeData:{cloud_name:"",api_key:"",upload_preset:""},mediaUrl:c["b"],appUrl:c["a"],activeName:"media",selected:[],loading:!1,active:!1,index:null,lightBoxFiles:[],saving:!1}},computed:Object(n["a"])({},Object(o["c"])(["file","isReady","store"])),watch:{file:function(e){var t=this;e&&(this.file.forEach((function(e){e.isSelected=!1,t.lightBoxFiles.push(t.mediaUrl+e.image)})),this.$store.commit("setIsReady",!0))},store:function(e){this.storeData.cloud_name=e.cloud_name,this.storeData.api_key=e.api_key,this.storeData.upload_preset=e.upload_preset}},mounted:function(){var e=this;this.$store.commit("setIsReady",!1),this.store&&(this.storeData.cloud_name=this.store.cloud_name,this.storeData.api_key=this.store.api_key,this.storeData.upload_preset=this.store.upload_preset),this.file&&(this.file.forEach((function(t){t.isSelected=!1,e.lightBoxFiles.push(e.mediaUrl+t.image)})),this.$store.commit("setIsReady",!0))},methods:{changeSelect:function(){this.selected=this.file.filter((function(e){return e.isSelected}))},Post:function(){var e=this;this.$smalltalk.confirm("Question","Are you sure you want to update cloudinary detail?").then((function(){e.saving=!0;var t=e.store;t.cloud_name=e.storeData.cloud_name,t.api_key=e.storeData.api_key,t.upload_preset=e.storeData.upload_preset,e.$axios.put("store/",{data:t}).then((function(t){e.$store.commit("setStore",t.data),e.saving=!1,e.$noti.display({color:"success",title:"Success",message:"Cool! Store has been successfully updated."})}))}))},setHeight:function(e){e.path[0].style.height=e.path[0].clientWidth+"px"},onFileChange:function(e){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function a(){var i,s,l,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(/\.(jpg|jpeg|png|JPG|PNG)$/.test(e.target.value)){a.next=3;break}return alert("The file uploaded need to be -jpeg,jpg,png"),a.abrupt("return",!1);case 3:if(!(e.target.files[0].size/1e6>1)){a.next=6;break}return alert("Max image file size is 1MB!"),a.abrupt("return",!1);case 6:return t.loading=!0,i=e.target.files[0],s=new FormData,s.append("file",i),s.append("upload_preset",t.store.upload_preset),s.append("api_key",t.store.api_key),s.append("timestamp",Date.now()/1e3|0),a.next=15,fetch("https://api.cloudinary.com/v1_1/".concat(t.store.cloud_name,"/image/upload"),{method:"POST",body:s});case 15:return l=a.sent,a.next=18,l.json();case 18:n=a.sent,t.uploadImageToServer({image:n.secure_url});case 20:case"end":return a.stop()}}),a)})))()},uploadImageToServer:function(e){var t=this;this.$axios.post("files/",{data:e}).then((function(){t.$store.commit("addFile",[e]),t.activeName="media",t.loading=!1})).catch((function(e){t.loading=!1,t.$noti.display({message:e,status:"error",color:"error"})}))},removeFiles:function(){var e=this;if(this.selected.length>0){this.loading=!0;var t=[];this.selected.forEach((function(e){t.push(e.id)})),this.$axios.post("remove-files/",{data:t}).then((function(){e.$store.commit("removeFile",t),e.selected=[],e.loading=!1,e.$noti.display({message:"Cool! File has been successfully deleted.",title:"success",color:"success"})})).catch((function(t){e.$noti.display({message:t,status:"error",color:"error"}),e.loading=!1}))}}}},d=r,u=a("2877"),m=Object(u["a"])(d,i,s,!1,null,"6ec82d84",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-2d0ceffb.58773a4b.js.map