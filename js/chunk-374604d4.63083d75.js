(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-374604d4"],{2645:function(t,e,a){},"4fe6":function(t,e,a){"use strict";var s=a("2645"),i=a.n(s);i.a},bfb3:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"billing row"},[t.isReady?a("div",{staticClass:"col-12 mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 flex-x-between mb-3"},[a("div",{staticClass:"flex-align-center"},[a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"no-width flat",attrs:{type:"primary",circle:""},on:{click:function(e){return t.$router.go(-1)}}},[a("i",{staticClass:"bx bx-left-arrow-alt"})]),a("h5",{staticClass:"my-0 ml-2"},[t._v("Billing")])],1)]),a("div",{staticClass:"col-lg-8"},[a("div",{staticClass:"box"},[a("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Billing cycle")]),a("div",{staticClass:"row package-box mx-0 mt-3"},t._l(t.packages,(function(e,s){return a("div",{key:e.name,staticClass:"col-12 package"},[a("el-radio",{attrs:{label:e},model:{value:t.selectedPackage,callback:function(e){t.selectedPackage=e},expression:"selectedPackage"}},[a("div",{staticClass:"w-100 flex-x-between"},[a("div",[a("span",{staticClass:"font-weight-bold mr-3"},[t._v(t._s(e.name))]),a("span",{staticClass:"gray"},[t._v("("+t._s(e.price)+"MMK "),1==e.monthQuantity?a("span",[t._v("in every month")]):a("span",[t._v(" x "+t._s(e.monthQuantity)+" months")]),t._v(")")])]),1!==e.monthQuantity?a("p",{staticClass:"primary"},[t._v(" Save "+t._s(e.save)+"MMK ")]):t._e()])]),s!==t.packages.length-1?a("div",{staticClass:"b-divider"}):t._e()],1)})),0)]),a("div",{staticClass:"box mt-3"},[a("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Payment methods")]),a("div",{staticClass:"row package-box mx-0 mt-3"},t._l(t.paymentMethods,(function(e,s){return a("div",{key:e.name,staticClass:"col-12 package"},[a("el-radio",{attrs:{label:e},model:{value:t.billing.payments[0].payment_method,callback:function(e){t.$set(t.billing.payments[0],"payment_method",e)},expression:"billing.payments[0].payment_method"}},[a("div",{staticClass:"w-100 flex-x-between"},[a("div",[a("span",{staticClass:"font-weight-bold mr-3"},[t._v(t._s(e.name))]),a("br"),a("span",{staticClass:"gray"},[t._v("Account number : "+t._s(e.payment_number))])])])]),s!==t.paymentMethods.length-1?a("div",{staticClass:"b-divider"}):t._e()],1)})),0)]),a("div",{staticClass:"box mt-3"},[a("div",{staticClass:"flex-align-center"},[a("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Payment")]),a("span",{staticClass:"gray mb-2"},[t._v("("+t._s(t.billing.payment_status)+")")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 mb-3"},[a("label",{staticClass:"custom-label mt-1 md-text",attrs:{for:""}},[t._v("Screenshots")]),a("file",{attrs:{multiple:!0},on:{completed:t.setImages}})],1),a("div",{staticClass:"col-6"},[a("label",{staticClass:"custom-label md-text",attrs:{for:""}},[t._v("Date")]),a("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd/MM/yyyy","value-format":"dd/MM/yyyy",placeholder:"Pick a date"},model:{value:t.billing.payments[0].date,callback:function(e){t.$set(t.billing.payments[0],"date",e)},expression:"billing.payments[0].date"}})],1),a("div",{staticClass:"col-6"},[a("label",{staticClass:"custom-label",attrs:{for:"Amount"}},[t._v("Amount")]),a("el-input",{staticClass:"w-100",attrs:{name:"Amount",type:"number"},on:{change:t.checkPayment},model:{value:t.billing.payments[0].amount,callback:function(e){t.$set(t.billing.payments[0],"amount",e)},expression:"billing.payments[0].amount"}})],1)])])]),a("div",{staticClass:"col-lg-4 pl-lg-0 mt-3 mt-lg-0"},[a("div",{staticClass:"mb-3 box"},[a("label",{staticClass:"custom-label mt-2 mb-0"},[t._v("Note")]),a("el-input",{attrs:{type:"textarea",row:3},model:{value:t.billing.note,callback:function(e){t.$set(t.billing,"note",e)},expression:"billing.note"}})],1),a("div",{staticClass:"box"},[a("h5",{staticClass:"my-0"},[t._v(t._s(t.billing.selected_plan.name)+" Plan")]),a("div",{staticClass:"b-divider mb-0"}),a("el-collapse",{model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},[a("el-collapse-item",{staticClass:"plan-features",attrs:{title:"PLAN DETAILS",name:"1"}},t._l(JSON.parse(t.billing.selected_plan.features),(function(e){return a("p",{key:e},[t._v(" "+t._s(e)+" ")])})),0)],1),a("div",{staticClass:"b-divider mt-0"}),a("div",{staticClass:"flex-x-between"},[a("p",{staticClass:"text-bold"},[t._v("Total:")]),a("p",{},[t._v(t._s(t.billing.total)+"MMK")])]),a("el-button",{staticClass:"w-100 mx-0 mb-0 mt-3",attrs:{type:"primary",disabled:0==t.billing.payments[0].amount||0==t.billing.number_of_months,loading:t.saving},on:{click:t.Post}},[t._v("Submit")])],1)])])]):t._e()])},i=[],n=(a("4160"),a("159b"),a("5530")),l=a("2f62"),o=a("9c83"),c=a("d50a"),r={data:function(){return{url:o["c"],saving:!1,active:"1",startEditing:!1,paymentMethods:[],billing:{store:null,selected_plan:null,payments:[{images:[],date:null,amount:0}],payment_method:null,subtotal:null,total:null,status:"Pending",payment_status:"Unpaid",number_of_months:null},packages:[{name:"Monthly",monthQuantity:1,price:0,save:0},{name:"3 Months",monthQuantity:3,price:0,save:0},{name:"6 Months",monthQuantity:6,price:0,save:0},{name:"Yearly",monthQuantity:12,price:0,save:0},{name:"2 Years",monthQuantity:24,price:0,save:0},{name:"3 Years",monthQuantity:36,price:0,save:0}],selectedPackage:null}},components:{file:c["d"]},watch:{selectedPackage:{handler:function(t){this.billing.price=t.price,this.billing.number_of_months=t.monthQuantity,this.billing.total=t.price*t.monthQuantity},deep:!0},store:function(){this.billing.store=this.store}},created:function(){this.$route.query.pid||this.$router.push({name:"Plan"}),this.$store.commit("setIsReady",!1),this.billing.date=this.$moment().format("DD/MM/YYYY"),this.billing.payments[0].date=this.$moment().format("DD/MM/YYYY"),this.getPaymentMethods(),this.billing.store=this.store,this.getPlan(this.$route.query.pid)},mounted:function(){},computed:Object(n["a"])(Object(n["a"])({},Object(l["c"])(["store","isReady"])),Object(l["b"])(["checkIsReady"])),beforeMount:function(){var t=this;window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("beforeunload",t.preventNav)}))},beforeRouteLeave:function(t,e,a){this.startEditing?this.$smalltalk.confirm("Question","Do you really want to leave? you have unsaved changes!").then((function(){a()})).catch((function(){a(!1)})):a()},methods:{preventNav:function(t){this.startEditing&&(t.preventDefault(),t.returnValue="")},checkPayment:function(){this.billing.payments[0].amount==this.billing.total||this.billing.payments[0].amount>this.billing.total?this.billing.payment_status="Paid":this.billing.payments[0].amount<this.billing.total?this.billing.payment_status="Partially Paid":0==this.billing.payments[0].amount&&(this.billing.payment_status="Unpaid")},setImages:function(t){var e=[];t.forEach((function(t){e.push({image:t.image})})),this.billing.payments[0].images=e},getPlan:function(t){var e=this;this.$axios.get("membership/?pid="+t).then((function(t){e.billing.selected_plan=t.data,e.packages.forEach((function(t,a){t.price=e.billing.selected_plan.price-e.billing.selected_plan.price*(.1*a),t.save=e.billing.selected_plan.price*t.monthQuantity-t.price*t.monthQuantity})),e.$store.commit("setIsReady",!0)})).catch((function(t){e.$noti.display({message:t,status:"error",color:"error"})}))},getPaymentMethods:function(){var t=this;this.$axios.get("payment-methods/").then((function(e){t.paymentMethods=e.data})).catch((function(e){t.$noti.display({message:e,status:"error",color:"error"})}))},Post:function(){var t=this;this.saving=!0,this.$axios.post("billing/",{data:this.billing}).then((function(){t.saving=!1,t.$noti.display({color:"success",title:"Success",message:"Cool! Billing has been successfully submitted. Please wait for approving."}),t.$router.push({name:"Billing History"})})).catch((function(e){t.saving=!1,t.$noti.display({message:e,status:"error",color:"error"})}))}}},m=r,u=(a("4fe6"),a("2877")),d=Object(u["a"])(m,s,i,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-374604d4.63083d75.js.map