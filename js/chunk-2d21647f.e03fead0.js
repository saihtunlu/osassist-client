(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21647f"],{c293:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[t.isReady?a("div",{staticClass:"col-12 mt-3"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 flex-x-between mb-3"},[a("div",{staticClass:"flex-align-center"},[a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"no-width flat",attrs:{type:"primary",circle:""},on:{click:function(e){return t.$router.push("/finance")}}},[a("i",{staticClass:"bx bx-left-arrow-alt"})]),a("h5",{staticClass:"my-0 ml-2"},[t._v(t._s(t.finance.date))]),"Incomes"==t.finance.type?a("el-tag",{staticClass:"rounded ml-2",attrs:{type:"success"}},[a("i",{staticClass:"bx bx-down-arrow-circle"}),t._v(" "+t._s(t.finance.type))]):t._e(),"Expense"==t.finance.type?a("el-tag",{staticClass:"rounded ml-2",attrs:{type:"danger"}},[a("i",{staticClass:"bx bx-up-arrow-circle"}),t._v(t._s(t.finance.type))]):t._e()],1),a("div",{staticClass:"flex-align-center flex-end"},[t.startEditing?a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"flat animated fadeInRight",attrs:{type:"primary"},on:{click:t.cancelEdit}},[t._v(" Discard ")]):t._e(),t.startEditing?a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],staticClass:"animated fadeInRight",attrs:{disabled:!t.startEditing,loading:t.saving,type:"primary"},on:{click:t.Post}},[t._v(" Save ")]):t._e(),a("el-button",{directives:[{name:"ripple",rawName:"v-ripple.400",modifiers:{400:!0}}],attrs:{type:"danger",loading:t.removing},on:{click:t.removeFinance}},[t._v(" Remove ")])],1)]),a("div",{staticClass:"col-lg-8"},[a("div",{staticClass:"box"},[a("p",{staticClass:"mt-0 mb-2 text-bold"},[t._v("Details")]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-6"},[a("label",{staticClass:"custom-label",attrs:{for:"name"}},[t._v("Note")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:"name"},model:{value:t.finance.note,callback:function(e){t.$set(t.finance,"note",e)},expression:"finance.note"}})],1),a("div",{staticClass:"col-lg-6"},[a("label",{staticClass:"custom-label",attrs:{for:"name"}},[t._v("Label")]),a("el-select",{staticClass:"w-100",attrs:{filterable:"","allow-create":"",clearable:"",placeholder:"Label"},model:{value:t.finance.label_name,callback:function(e){t.$set(t.finance,"label_name",e)},expression:"finance.label_name"}},t._l(t.labels,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1)],1),a("div",{staticClass:"col-lg-6"},[a("label",{staticClass:"custom-label",attrs:{for:"date"}},[t._v("Date")]),a("el-date-picker",{staticClass:"w-100",attrs:{type:"date",format:"dd/MM/yyyy","value-format":"dd/MM/yyyy",placeholder:"Pick a date"},model:{value:t.finance.date,callback:function(e){t.$set(t.finance,"date",e)},expression:"finance.date"}})],1),a("div",{staticClass:"col-lg-6"},[a("label",{staticClass:"custom-label",attrs:{for:"Phone"}},[t._v("Amount")]),a("el-input",{staticClass:"w-100 mb-3",attrs:{name:"Amount",type:"number"},model:{value:t.finance.amount,callback:function(e){t.$set(t.finance,"amount",e)},expression:"finance.amount"}})],1)])])])])]):t._e()])},s=[],n=a("5530"),l=a("2f62"),c={data:function(){return{saving:!1,finance:{},loading:null,startEditing:!1,financeBeforeEdit:"",labels:[],removing:!1}},watch:{finance:{handler:function(t){this.financeBeforeEdit==JSON.stringify(t)?this.startEditing=!1:this.startEditing=!0},deep:!0}},created:function(){this.filterfinance(),this.getLabels()},beforeMount:function(){var t=this;window.addEventListener("beforeunload",this.preventNav),this.$once("hook:beforeDestroy",(function(){window.removeEventListener("beforeunload",t.preventNav)}))},beforeRouteLeave:function(t,e,a){this.startEditing?this.$smalltalk.confirm("Question","Do you really want to leave? you have unsaved changes!").then((function(){a()})).catch((function(){a(!1)})):a()},methods:{preventNav:function(t){this.startEditing&&(t.preventDefault(),t.returnValue="")},getLabels:function(){var t=this,e="labels";this.$axios.get(e).then((function(e){t.labels=e.data})).catch((function(e){t.$noti.display({message:e,status:"error",color:"error"})}))},filterfinance:function(){var t=this;this.$store.commit("setIsReady",!1),this.$axios.get("finance/?finance_id="+this.$route.params.id).then((function(e){t.finance=e.data,t.financeBeforeEdit=JSON.stringify(e.data),setTimeout((function(){t.startEditing=!1}),10),t.$store.commit("setIsReady",!0)})).catch((function(e){t.$noti.display({message:e,title:"",status:"error",color:"error"})}))},cancelEdit:function(){var t=this;this.finance=JSON.parse(this.financeBeforeEdit),setTimeout((function(){t.startEditing=!1}),10)},Post:function(){var t=this;this.saving=!0,this.$axios.put("finance/",{data:this.finance}).then((function(e){t.saving=!1,t.financeBeforeEdit=JSON.stringify(e.data),t.finance=e.data,t.startEditing=!1,t.$noti.display({title:"Success",status:"normal",color:"success",message:"Cool! finance has been successfully updated."}),setTimeout((function(){t.$router.push("/finance")}),500)})).catch((function(e){t.saving=!1,t.$noti.display({message:e,title:"",status:"error",color:"error"})}))},removeFinance:function(){var t=this;this.removing=!0,this.$axios.post("remove-finances/",{data:[this.finance.id]}).then((function(){t.$noti.display({message:"Cool! Item has been successfully deleted.",title:"success",status:"normal",color:"success"}),t.removing=!1,t.$router.push("/finance")}))}},computed:Object(n["a"])({},Object(l["c"])(["isReady","store"]))},o=c,r=a("2877"),d=Object(r["a"])(o,i,s,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-2d21647f.e03fead0.js.map